\documentclass[a4paper,oneside,12pt]{book} % -*- coding: vietnamese-utf8 mode: latex -*-
\usepackage[utf8]{vietnam}
\renewcommand{\rmdefault}{utm}
\renewcommand{\sfdefault}{uhv}
\renewcommand{\ttdefault}{ucr}

\usepackage[hmargin={2cm,2cm}]{geometry}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage[vietnam]{minitoc}
\newcommand{\note}[1]{\underline{#1}}
\newcommand{\comment}[1]{}
\usepackage{theorem}
\usepackage{tabularx}
\usepackage{footnote}
\usepackage{tipa}
\usepackage{subfigure}

\theoremstyle{break}
\newtheorem{algo}{Thuật toán}

\setlength{\parskip}{1.5ex plus 0.7ex minus 0.6ex}

\setcounter{minitocdepth}{4}

\title{Chương trình bắt lỗi chính tả tiếng Việt}
\author{Nguyễn Thái Ngọc Duy\\0012020}

\begin{document}
\dominitoc
%\doparttoc
\maketitle
\begin{titlepage}
  \begin{center}
    \Large BLAH
  \end{center}
balh blah blah
balh blah blah
balh blah blah
balh blah blah
balh blah blah
balh blah blah
balh blah blah
balh blah blah

\begin{flushright}
  blah blah
\end{flushright}
\end{titlepage}
\tableofcontents
\listoffigures
\listoftables
%\large%

%% \chapter{Giới thiệu}
%% \label{cha:intro}
%% \begin{center}

%% I kept the right ones out

%% And let the wrong ones in

%% Had an angel of mercy

%% To see me through all my sins

%% There were times in my life

%% When I was goin' insane

%% Tryin' to walk through the pain

%% ****

%% And when I lost my grip

%% And I hit the floor

%% Yeah, I thought I could leave

%% But couldn't get out the door

%% I was so sick n' tired

%% Of livin' a lie

%% I was wishing that I would die

%% ****

%% It's amazing

%% With the blink of an eye

%% You finally see the light

%% It's amazing

%% That when the moment arrives

%% You know you'll be alright

%% It's amazing

%% And I'm saying a prayer

%% To the desperate hearts tonight


%% ****


%% That one last shot's a Permanent Vacation

%% And a how high can you fly with broken wings

%% Life's a journey - not a destination

%% And I just can't tell just what tomorrow brings


%% ****


%% You have to learn to crawl

%% Before you learn to walk

%% But I just couldn't listen

%% To all that righteous talk

%% I was out on the street

%% Just tryin' to survive

%% Scratchin' to stay alive


%% ****


%% ``To all of you people out there

%% Wherever you are - remember:

%% The light at the end of the tunnel

%% May be you - goodnight''
%%\end{center}

\chapter{Tổng quan}
\label{cha:overview}
\minitoc


Ngôn ngữ là một phần quan trọng của đời sống, là phương tiện chuyển
tải thông tin trong đời sống. Trong thời đại bùng nổ thông tin hiện
nay thì ngôn ngữ đóng vai trò hết sức quan trọng, đặc biệt là ngôn ngữ
viết. 

% Tại sao lại làm đề tài này? (Đặt vấn đề)
Khi viết, đôi khi ta mắc phải những lỗi sai chính tả. Tiếng
Việt chịu ảnh hưởng mạnh của ngôn ngữ nói. Một số âm tiết lại rất dễ
lầm lẫn, khó phân biệt rõ ràng. Ngôn ngữ nói ở từng vùng khác nhau lại
có những dị biệt riêng, không chuẩn. Những dị biệt này rất dễ gây ra
những lỗi chính tả khi viết nếu người viết không hiểu rõ về tiếng
Việt.

Những thao tác chuyển thông tin ở dạng khác thành văn bản cũng có thể
gây ra lỗi chính tả. Ví dụ, nếu nhập liệu không cẩn thận dẫn đến lỗi
sai chính tả. Khi ghi lại lời nói của người khác mà người đó sử dụng
giọng địa phương cũng có thể dẫn đến lỗi chính tả. Quét các văn bản
giấy thành văn bản điện tử, sử dụng chương trình nhận dạng chữ, cũng
có thể dẫn đến lỗi chính tả do chương trình nhận dạng nhầm lẫn~\ldots

Văn bản dễ bị sai chính tả do nhiều yếu tố khách quan. Để kiểm lỗi
chính tả những văn bản này đòi hỏi nhiều công sức và thời gian, đặc
biệt khi khối lượng văn bản bùng nổ như hiện nay. Do đó cần có một
công cụ hỗ trợ kiểm lỗi chính tả, giúp nhanh chóng phát hiện lỗi chính
tả và đề nghị cách khắc phục.

Trong thời đại tin học hoá, máy tính được tận dụng để giảm thiểu công
sức của con người, đồng thời tăng tính hiệu quả. Tin học đã được áp
dụng trong nhiều lĩnh vực khác nhau và chứng tỏ tính hiệu quả của
nó. Tuy nhiên, việc ứng dụng tin học nhằm hỗ trợ bắt lỗi
chính tả tiếng Việt chỉ mới được bắt đầu trong thời gian gần
đây. Những ứng dụng bắt lỗi chính tả hiện có vẫn còn khá đơn giản đơn
giản, chưa đáp ứng được nhu cầu thực tế. Luận văn này đề ra một giải
pháp khác để bắt lỗi chính tả, với hy vọng góp phần nâng cao chất
lượng ứng dụng bắt lỗi chính tả tiếng Việt bằng máy tính.

\section{Nội dung bài toán}

Bài toán có thể được phát biểu như sau:
Cho một văn bản tiếng Việt. Tìm tất cả các từ sai chính tả trong văn bản
và đề nghị cách giải quyết lỗi nếu có.

% Phạm vi bài toán

Do ngôn ngữ là một lĩnh vực quá rộng. Việc bắt lỗi chính tả tiếng Việt
tổng quát là cực kỳ khó khăn. Do vậy đề tài này chỉ giới hạn bắt lỗi
chính tả trong các văn bản hành chính.

Chỉ sử dụng từ điển từ, từ điển tiếng và ngữ liệu thô làm đầu vào.

Khái niệm từ ở đây là ``từ từ điển'' --- tức là các từ đơn, từ ghép,
cụm từ được lưu trong từ điển. 

Lỗi chính tả ở đây bao gồm chủ yếu hai loại lỗi sau:
\begin{itemize}
\item Lỗi nhập liệu sai: lỗi gõ thiếu chữ, gõ dư chữ, gõ nhầm vị trí
  hai chữ liên tiếp nhau, gõ nhầm một chữ bằng một chữ khác, sai sót
  do bộ gõ tiếng Việt~\ldots
\item Lỗi phát âm sai: chủ yếu là do đặc điểm phát âm của từng vùng,
  dẫn đến sai chính tả khi viết.
\end{itemize}

Không xử lý lỗi từ vựng, lỗi cú pháp.

Giả định rằng, nếu từ bị sai chính tả, thì chỉ sai bởi một trong những
lý do nêu trên {\em một lần}. Nghĩa là không xét những trường hợp sai
chính tả, vừa gõ nhầm chữ này bằng chữ khác, vừa gõ dư chữ.

Giả định người dùng chỉ sử dụng một trong hai cách gõ tiếng Việt là
VNI hoặc TELEX.

Văn bản tiếng Việt được coi là thuần Việt. Những từ nước ngoài, các ký
hiệu đều bị coi là sai chính tả.

\section{Đặc điểm}

Bắt lỗi chính tả, xét từ quan điểm tin học, là một bài toán khó. Khó
bởi vì ngôn ngữ là một phần rất quan trọng của đời sống xã hội, nó bao
hàm rất nhiều khía cạnh của văn hoá, xã hội. Ngôn ngữ dùng để diễn đạt
suy nghĩ, chuyển tải thông tin, nên nó chứa đựng một khối lượng tri
thức đồ sộ. Để xử lý ngôn ngữ tự nhiên một cách đúng đắn đòi hỏi một
trình độ nhất định. Bởi vậy, việc giải quyết bài toán bắt lỗi chính tả
bằng máy tính là hết sức khó khăn.

Bắt lỗi chính tả đôi khi được mở rộng để phát hiện những lỗi khác
trong văn bản như lỗi cú pháp, lỗi từ vựng~\ldots Việc này cũng dễ
hiểu vì người sử dụng cần một chương trình giúp họ phát hiện và loại
bỏ tất cả các lỗi trong văn bản, không quan trọng lỗi đó thuộc loại
lỗi nào. Thông thường những lỗi từ vựng thường bị nhầm lẫn với lỗi
chính tả, buộc chương trình bắt lỗi chính tả phải phát hiện cả lỗi từ
vựng. Đây là một vấn đề khó vì để bắt lỗi từ vựng, đôi khi cần phải
hiểu nội dung cả văn bản.

Nếu tìm hiểu sâu hơn về bài toán này, ta lại gặp một khó khăn khác do
bản chất của tiếng Việt. Đối với tiếng Việt, cũng như một số
ngôn ngữ châu Á khác, một từ chính tả có thể không tương ứng với một
``từ'' trên văn bản. Đối với các thứ tiếng châu Âu, ta có thể dễ dàng
nhận ra một từ, do các từ được phân cách bằng khoảng trắng. Điều đó
không đúng với tiếng Việt. Trong tiếng Việt, các tiếng được phân cách
bởi khoảng trắng, không phải các từ. Điều này dẫn đến một bài toán
mới: tách từ trong tiếng Việt. Do tiếng Việt là ngôn ngữ nói sao viết
vậy, nên rất ít khi gặp lỗi sai về tiếng. Đa số các lỗi chính tả là
lỗi sai từ, nên việc xác định đâu là từ cực kỳ quan trọng.

Do tài nguyên ngữ liệu tiếng Việt, đặc biệt là ngữ liệu tiếng Việt
trên máy tính vẫn còn hạn chế, đề tài này chỉ sử dụng các cách hình
thành lỗi chính tả, từ điển từ tiếng Việt và ngữ liệu văn bản dạng
thô. Việc không thể áp dụng được những thông tin cấp cao hơn như từ
loại, cú pháp, ngữ nghĩa~\ldots sẽ làm hạn chế đáng kể khả năng của
chương trình.

%% Dùng sai từ là lỗi từ vựng

\section{Hướng giải quyết}

% Bối cảnh %%%%Nổ thêm về bối cảnh ở đây. Cố để lấn qua trang kế%%%

Bài toán bắt lỗi chính tả đã được tìm hiểu từ rất lâu. Tuy nhiên đa số
đều tập trung vào các ngôn ngữ phổ dụng ở châu Âu. Trong khi đó các ngôn
ngữ châu Á, đặc biệt là tiếng Việt, có những đặc trưng riêng, đặt ra
nhiều thách thức mới. Bài toán bắt lỗi chính tả trên các ngôn ngữ châu
Á như tiếng Trung Quốc, tiếng Hàn Quốc, tiếng Nhật, tiếng Thái và tiếng Việt
chỉ bắt đầu được nghiên cứu gần đây.

Đối với các ngôn ngữ châu Âu, cách giải quyết đơn giản là dựa vào từ
điển. Nếu một từ trên văn bản không có trong từ điển nghĩa là từ đó
sai chính tả.

Đối với các ngôn ngữ như tiếng Trung Quốc, tiếng Nhật~\ldots, nhiều
giải pháp được đề ra để giải quyết bài toán. Những giải pháp nổi bật
là: blah blah blah

Đề tài này áp dụng cách giải quyết truyền thống, so sánh từ dựa trên
từ điển. Nếu từ không có trong từ điển nghĩa là sai chính tả, từ đó
đưa ra những gợi ý thích hợp.

Bài toán đặt ra một bái toán con khác là tách từ tiếng Việt trong điều
kiện văn bản bị sai chính tả. Cách giải quyết bài toán này là tạo ra
mọi cách tách từ có thể, sử dụng tập nhầm lẫn, và sau đó áp dụng mô hình
ngôn ngữ để tìm ra cách tách từ đúng nhất.

\chapter{Cơ sở lý thuyết ngôn ngữ}
\label{cha:vietnamese}
\minitoc\newpage



\section{Âm tiết}

Ngôn ngữ là một hệ thống tín hiệu. Khi nói, vỏ vật chất của tín hiệu
là âm thanh, khi viết nó được thể hiện bằng chữ. Không phải chữ viết
lúc nào cũng phản ánh chính xác các âm tố tương ứng. Vì vậy, các âm tố
được biểu diễn bằng những ký hiệu đặc biệt, gọi là phiên âm. Các ký
hiệu phiên âm thường đặt giữa \textipa{/\quad/} hoặc
\textipa{[\quad]}.

Âm thanh trong tự nhiên được tạo thành nhờ sự rung động của một vật
thể đàn hồi. Âm thanh của tiếng nói được hình thành nhờ ``bộ máy phát
âm'' của con người --- bao gồm môi, răng, lưỡi, khoang miệng, khoang
mũi, yết hầu, thanh hầu, phổi~\ldots. Ngoài ra, tai người chỉ có thể
tiếp nhận một khoảng âm thanh nhất định. Những chấn động không nghe
được gọi là siêu âm và âm ngoại.

Âm học phân biệt các âm thanh theo những đặc trưng khác nhau, bao gồm:
độ cao, độ mạnh, độ dài. Độ cao phụ thuộc vào tần số dao động. Tần số
dao động càng lớn thì âm thanh càng cao. Tai người có khả năng nhận
biết độ cao trong khoảng từ 16 đến 20.000 $H_z$. Độ mạnh (cường độ)
phụ thuộc vào biên độ dao động. Biên độ càng lớn, âm thanh càng
to. Cường độ âm thanh trong ngôn ngữ đảm bảo sự xác minh trong giao tế
và là cơ sở để tạo thành các kiểu trọng âm khác nhau. Độ dài (trường
độ) là khoảng thời gian kéo dài của âm thanh. Ngôn ngữ chỉ quan trọng
thời gian tương đối của âm thanh. Ví dụ, các nguyên âm có trọng âm
thường dài hơn nguyên âm không có trọng âm.


\subsection{Nguyên âm và phụ âm}

Các âm tố có thể chia thành nguyên âm và phụ âm, dựa vào các đặc điểm
âm học, cấu âm và vai tròn trong cấu tạo âm tiết.

Nguyên âm có đặc điểm cấu tạo:
\begin{itemize}
\item Luồng hơi ra tự do, không bị cản trở, không có vị trí cấu âm.
\item Bộ máy phát âm căng thẳng toàn bộ.
\item Luồng hơi ra yếu.
\end{itemize}

Phụ âm có đặc điểm cấu tạo hoàn toàn trái ngược với nguyên âm:
\begin{itemize}
\item Luồng hơi bị cản trở do sự xuất hiện chướng ngại trên lối ra của
  luồng không khí, chương ngại thường xuất hiện ở các khoang trên
  thanh hầu do các khí quan tiếp xúc nhau hay nhích gần nhau mà thành,
  điểm có chướng ngại được gọi là vị trí cấu âm của phụ âm.
\item Bộ máy phát âm không căng thẳng toàn bộ mà sự căng thẳng cơ thịt
  tập trung ở vị trí cấu âm.
\item Luồng hơi ra mạnh.
\end{itemize}

Nguyên âm và phụ âm có chức năng khác nhau trong cấu tạo âm tiết. Các
nguyên âm thường làm hạt nhân hay đỉnh của âm tiết, còn phụ âm thường
là yếu tố đi kèm, không tạo thành âm tiết (trừ các âm phụ vang).

Những âm tố có đặc tính giống nguyên âm nhưng thường chỉ đi kèm, bản
thân không tạo thành âm tiết được gọi là {\em bán nguyên âm}. Ví dụ,
các âm tố viết là u, i trong các âm ``sau'', ``mai'' trong tiếng Việt.


\subsection{Âm vị}

Âm vị là đơn vị nhỏ nhất của cơ cấu âm thanh ngôn ngữ, dùng để cấu tạo
và phân biệt hình thức ngữ âm của những đơn vị có nghĩa của ngôn ngữ
--- từ và hình vị. Ví dụ, các từ ``tôi'' và ``đôi'', ``ta'' và ``đa''
được phân biệt bởi các âm vị \textipa{/t/} và \textipa{/d/}.

Âm vị là đơn vị nhỏ nhất, vì về mặt tuyến tính nó không thể phân chia
nhỏ hơn nữa. Nếu thay âm vị này bằng âm vị khác trong cùng mọt bối
cảnh ngữ âm sẽ làm cho từ thay đổi nghĩa hoặc mất nghĩa. Ví dụ, thay
âm \textipa{/t/} trong từ ``toàn'' bằng âm \textipa{/h/} sẽ được
``hoàn'' có nghĩa khác, hoặc nếu thay bằng âm \textipa{/n/} sẽ được
``noàn'' hoàn toàn vô nghĩa.

Âm vị có thể được so sánh như những viên gạch trong việc xây dựng mỗi
ngôn ngữ. Các viên gạch thường giống nhau, nhưng các âm vị về nguyên
tắc phải khác nhau, ít nhất ở một đặc trưng nào đó. Sự khác biệt này
tạo ra khác biệt về hình thức âm thanh của hình vị và từ, tạo ra tín
hiệu khác biệt đối với sự thụ cảm của con người. Vậy âm vị có hai chức
năng cơ bản là {\em chức năng khu biệt} (vỏ âm thanh của hình vị và
từ) và {\em chức năng cấu tạo} (chất liệu để cấu tạo nên
những thành tố của những đơn vị có nghĩa).


\subsection{Âm tiết}

Chuỗi lời nói của con người được chia ra làm những khúc đoạn khác
nhau, từ lớn đến nhỏ. Âm tiết là đơn vị phát âm nhỏ nhất, được phân
định tự nhiên trong lời nói con người.

Về phương diện phát âm, dụ lời nói chậm đến đâu cũng chỉ phân chia đến
giới hạn của âm tiết mà thôi. Nhưng về phương diện thính giác thì âm
tiết là một tổ hợp âm thanh, có thể gồm nhiều âm tố hoặc đôi khi chỉ
có một âm tố. Mỗi âm tiết chỉ có một âm tố âm tiết tính (có khả năng
tạo thành âm tiết), còn lại là những yếu tố đi kèm, không tự mình tạo
thành âm tiết. Âm tố âm tiết tính thường được phân bố ở đỉnh hay ở
trung tâm, làm hạt nhân âm tiết, thường là các nguyên âm. Các phụ âm
thường là các yếu tố đi kèm, đứng ngoài biên, hay ở ranh giới của âm
tiết. Đôi khi âm tiết chỉ gồm một nguyên âm.

Trong một số trường hợp, âm tiết có thể có hai hoặc ba nguyên âm. Tuy
nhiên trong số đó chỉ có một nguyên âm tạo đỉnh, các âm tố khác không
tạo thành âm tiết, gọi là bán nguyên âm.

Âm tiết có một số chức năng sau:
\begin{itemize}
\item Âm tiết có chức năng tổ chức chất liệu âm thanh của ngôn ngữ
  bằng cách hợp nhất các âm tố trong một đơn vị phát âm nhỏ nhất.
\item Âm tiết là môi trường để hiện thực hoá các hiện tượng ngôn điệu
  như trọng âm, âm điệu.
\item Âm tiết có chức năng cấu thành tiết điệu của lời nói~\ldots Chức
  năng này thể hiện rõ trong ngôn ngữ thơ.
\end{itemize}

Trong các ngôn ngữ âm tiết tính như tiếng Trung Quốc, tiếng Miến Điện,
tiếng Việt~\ldots nói chung âm tiết trùng với hình vị --- đơn vị cơ
bản của ngữ pháp. Âm tiết có chức năng là vỏ ngữ âm của hình vì, tạo
nên một đơn vị đặc biệt, gọi là {\em hình tiết}.

Tính chất âm tiết của tiếng Việt đưa đến nhiều hệ quả quan trọng về
ngữ âm cũng như về ngữ pháp. Về mặt ngữ âm, do mỗi âm tiết là vỏ ngữ
âm của một hình vị, và cũng thường là vỏ ngữ âm của từ đơn, nên số
lượng các âm tiết là hữu hạn\footnote{Theo Nguyễn Phan Cảnh ``tiếng
  Việt đưa ra hơn 17.000 âm tiết --- tín hiệu với tự cách là vỏ ngữ âm
khả năng, và chỉ sử dụng hơn 6.900 với tư cách là các âm tiết tồn tại
thực'' (Nguyễn Phan Cảnh, ``Bản chất cấu trúc âm tiết tính của ngôn
ngữ: Dẫn luận vào một miêu tả không phân lập đối với âm vị học Việt
Nam, tạp chí ngôn ngữ, H. 1978, sồ 2)}.

Là vỏ ngữ âm của một hình vị hay một từ đơn, mỗi âm tiết Tiếng Việt
bao giờ cũng tương ứng với một ý nghĩa nhất định, nên việc phá vỡ cấu
trúc âm tiết trong ngữ lưu, tức xê dịch vị trí các âm tố (âm vị) của
cùng một hình vị từ âm tiết này sang âm tiết khác, là điều ít xảy
ra. Kết quả là trong tiếng Việt, âm tiết có một cấu trúc chặt chẽ, mỗi
âm tố (âm vị) có một vị trí nhất định trong âm tiết. Đứng đầu âm tiết
bao giờ cũng là một phụ âm, cuối âm tiết là một phụ âm hoặc một bán
nguyên âm. Phụ âm cuối luôn luôn ở cuối âm tiết, không thể trở thành
âm đầu được. Do đó, phụ âm cuối và âm đầu làm thành hai đối hệ khác
nhau, có vị trí và chức năng khác nhau trong cấu trúc âm tiết.

Một đặc điểm khác của âm tiết tiếng Việt là mỗi âm tiết đều mang
một thanh điệu nhất định. Việc thể hiện thanh điệu đòi hỏi âm tiết
phải có một trường độ cố định. Tính chất này làm cho các yếu tố bên
trong âm tiết, trừ phụ âm đầu, không có một trường độ cố định, mà đắp
đổi lẫn nhau, liên quan với nhau rất chặt chẽ.


\subsubsection{Cấu trúc âm tiết tiếng Việt}

Trên bình diện ngữ âm học, các cứ liệu thực nghiệm cho thấy âm tiết
Tiếng Việt được cấu tạo bởi ba thành tố độc lập là thanh điệu, phụ âm
đầu và phần còn lại.

Thanh điệu là yếu tố luôn có mặt trong mọi âm tiết tiếng Việt. Tính
chất độc lập về mặt ngữ âm của thanh điệu thể hiện ở chỗ nó có đường
nét và trường độ tương đối ổn định tùy thuộc vào các loại hình âm
tiết.

Phụ âm đầu là yếu tố mở đầu của âm tiết. Tính chất độc lập của phụ âm
đầu thể hiện ở chỗ nó không tham gia vào việc đắp đổi về trường độ
giữa các yếu tố bên trong âm tiết.

Phần còn lại của âm tiết có từ một đến ba yếu tố, gồm một bán nguyên
âm chiếm vị trí trung gian giữa phụ âm đầu và phần còn lại, một nguyên
âm âm tiết tính và một phụ âm hoặc bán nguyên âm cuối, có vai trò kết
thúc âm tiết. Trừ bán nguyên âm trước nguyên âm tiết tính, các yếu tố
của phần còn lại liên kết với nhau rất chặt chẽ, làm thành một
khối. Để đảm bảo cho tính chất cố định về trường độ của âm tiết, các
yếu tố của phần còn lại có sự đắp đổi nhau về trường độ: nếu nguyên âm
dài thì phụ âm hay bán âm cuối ngắn, ngược lại nếu nguyên âm ngắn thì
âm cuối dài. Các yếu tố của phần còn lại không có một trường độ cố
định, và do đó mức độ độc lập về mặt ngữ âm của chúng thấp hơn so với
phụ âm mở đầu âm tiết. Phần còn lại của âm tiết được gọi là phần vần,
vì đây là bộ phận đoạn tính kết hợp với thanh điệu tạo nên vần thơ.

Tóm lại, các yếu tố của âm tiết tiếng Việt có mức độ độc lập khác
nhau, chia làm hai bậc:

\begin{itemize}
\item Bậc một là những yếu tố độc lập về mặt ngữ âm và có thể được
  tách rời về mặt hình thái học. Đó là thanh điệu, âm đầu và vần.
\item Bậc hai là các yếu tố của phần vần, gồm bán nguyên âm trước
  nguyên âm âm tiết tính (được gọi là âm đệm), nguyên âm âm tiết tính
  (được gọi là âm chính), phụ âm hoặc bán nguyên âm cuối (được gọi là
  âm cuối). Các yếu tố này gắn liền với nhau về mặt ngữ âm do tính
  chất cố định về trường độ của âm tiết và chỉ được tách ra bằng những
  ranh giới thuần túy ngữ âm học.
\end{itemize}

Các thành tố của âm tiết tiếng Việt và quan hệ hai bậc giữa các thành
tố được trình bày trong hình~\ref{fig:cautrucamtiet}.

\begin{figure}[htbp]
  \centering
  \begin{tabular}{|c|c|c|c|}
    \hline
    \multicolumn{4}{|c|}{Thanh điệu}\\\hline
    Âm đầu&\multicolumn{3}{c|}{Vần}\\\cline{2-4}
    &Âm đệm&Âm chính&Âm cuối\\\hline
  \end{tabular}
  \caption{Cấu trúc âm tiết}
  \label{fig:cautrucamtiet}
\end{figure}

%\subsection{Các hiện tượng liên quan đến âm tiết}


%\subsubsection{Nguyên âm đôi}


% Sự biến hoá ngữ âm

Khái niệm âm tiết liên quan mật thiết đến sự biến hoá ngữ âm. Vì các
âm tố lời nói không phát âm đơn lập mà được phát âm trong dòng lời nói
liên tục, cho nên các âm tố có thể ảnh hưởng lẫn nhau, đặc biệt là
những âm tố lân cận được phát âm trong cùng một âm tiết, hoặc ở những
âm tiết đi liền nhau. Một số hiện tượng biến hoá ngữ âm thường gặp
trong tiếng Việt:
\begin{itemize}
\item Sự thích nghi. Xuất hiện giữa phụ âm và nguyên âm đứng cạnh
  nhau. Nếu âm tố sau biến đổi cho giống âm tố đi trước, đó là thích
  nghi xuôi. Nếu âm tố trước biến đổi cho hợp với âm tố sau là thích
  nghi ngược. Trong tiếng Việt, nguyên âm và phụ âm cuối kết hợp với
  nhau rất chặt chẽ, tạo thành vần của âm tiết. Hiện tượng thích nghi
  biểu hiện rõ rệt trong những vần có nguyên âm dòng trước và dòng sau
  tròn môi kết hợp với phụ âm cuối ``ng'' và ``c''.
\item Sự đồng hoá (một yếu tố thay đổi để giống yếu tố kia). Ví dụ,
  ``vỏn vẹn'' và ``vẻn vẹn''.
\item Sự dị hoá (hiện tượng rút gọn cho dễ phát âm). Ví dụ, ``ba mươi
  mốt'' và ``băm mốt''.
\end{itemize}

\subsection{Phụ âm đầu}

Phụ âm đầu luôn gắn liền với vị trí và chức năng mở đầu âm tiết. Đi
sau âm đầu trong âm tiết là bán nguyên âm không thành âm tiết (hay còn
gọi là âm đệm).

Hệ thống phụ âm đầu tiếng Việt với số lưỡng đối lập âm vị học tối đa
được thể hiện trên chữ viết. Riêng những âm tiết như ``ăn'',
``uống''~\ldots tuy không ghi phụ âm đầu, nhưng thực tế vẫn tồn tại
phụ âm đầu (âm tắt thanh hầu \textipa{/P/}). Trong từng phương ngữ,
một số đối lập có trên chữ viết có thể bị mất đi hoặc bị thay thế. Ví
dụ, trong tiếng Hà Nội không còn đối lập các phụ âm đầu giữa
ch--tr,x--s và gi,d với r. Trong tiếng miền Nam, \textipa{/v/} và
\textipa{/z/} được thay bằng \textipa{/j/}.

Hiện nay, hệ thống phụ âm đầu được sử dụng thực tế trong nhà trường và
trên các văn bản, chung cho các phương ngữ đó là hệ thống phụ âm đầu
hình thành trên cơ sở phát âm Hà Nội với sự phân biệt các phụ âm
ch--tr, x--s, g,gi--r gồm 22 phụ âm sau: \textipa{/b, m, f, v, t,
  t\super{h}, d, n, s, z, l, \:t, \:s, \:z, c, \textltailn, k, N, x,
  G, P, h/}\footnote{Phụ âm \textipa{/p/} gặp trong từ vay mượn hoặc
  phiên âm tiếng nước ngoài, không được đưa vào hệ thống này}

Hệ thống phụ âm đầu của tiếng địa phương miền Bắc, mà cở sở là phát âm
Hà Nội có 19 phụ âm (kể cả âm tắc thanh hầu \textipa{/P/}). Trong phát
âm Hà Nội không có loạt phụ âm uốn lưỡi \textipa{/\:t, \:s, \:z/}. Các
phụ âm này đều được chuyển thành các âm đầu lưỡi hoặc mặt lưỡi tương
ứng \textipa{/c, s, z/}. Ví dụ,
\begin{itemize}
\item ``cha'' và ``tra'' đều phát âm thành ``cha'' \textipa{/ca/}
\item ``sa'' và ``xa'' đều phát âm thành ``xa'' \textipa{/sa/}
\item ``da'', ``gia'' và ``ra'' đều được phát âm thành ``da'' \textipa{/da/}
\end{itemize}

Trong các thổ ngữ vùng Bắc Trung Bộ (Nghệ Tĩnh --- Bình Trị Thiên) còn
giữ loạt các phụ âm cong lưỡi \textipa{/\:t, \:s, \:z/}. Ở một số nơi
thuộc Nghệ Tĩnh, phụ âm ``ph'' được phát âm như âm mặt lưỡi sau bật
hơi \textipa{/k\super{h}/}. Vì vậy hệ thống phụ âm đầu những nơi này
có thêm dãy âm bật hơi \textipa{p\super{j}, \:t\super{h},
  k\super{h}}. Trong khi đó các thổ ngữ miền Bắc và miền Nam chỉ còn
lại một âm bật hơi \textipa{/t\super{h}/} mà thôi. Vùng Bình Trị Thiên
không có phụ âm ``nh''. Phụ âm này thường được phát âm thành
\textipa{/j/}. Ví dụ, ``nhà'' được phát âm thành ``dà''. Nếu coi hệ
thống phụ âm đầu vùng Vinh là đại diện cho phương ngự Bắc Trung Bộ thì
hệ thống này có 22 phụ âm đầu.

Hệ thống phụ âm đầu miền Nam (từ đèo Hải Vân trở vào) không có các phụ
âm xát hữu thanh \textipa{/v, z/}. Tương ứng với \textipa{/v, z/}
trong phát âm Hà Nội, phát âm miền Nam có phụ âm mặt lưỡi giữa
\textipa{/j/}. Đôi khi âm \textipa{/v/} được phát âm thành âm mội-môi,
xát, vang ngạc hoá \textipa{/Bj/}. Hiện nay các âm cong lưỡi đang
trong quá trình biến đổi trong tiếng miền Nam. Phụ âm \textipa{/\:s/}
là phụ âm ít bền vững nhất thường được phát âm thành
\textipa{/s/}. Các phụ âm cong lưỡi khác như \textipa{/\:t/} và
\textipa{/\:z/} vẫn còn giữ lại, phân biệt với \textipa{/c/} và
\textipa{/j/} nhưng không đều đặn ở các thổ ngữ. Trong phát âm miền
Nam có phụ âm đầu \textipa{/w/}\footnote{Giá trị âm vị học của
  \textipa{/w/} là vấn đề còn đang bàn cãi} xát, môi-môi, tương ứng
với các phụ âm tắc, lưỡi sau và thanh hầu tiếng Bắc khi kết hợp với âm
đệm \textipa{/-u-/}. Ví dụ, ``qua'' \textipa{/wa/}, ``ngoại''
\textipa{/wai/}, hoa \textipa{/wa/}. Nếu lấy hệ thống phụ âm đầu của
tiếng thành phố Hồ Chí Minh làm cơ sở cho phương ngữ miền Nam thì hệ
thống này có 21 phụ âm đầu.


\subsubsection{Quan hệ phân bố giữa phụ âm đầu và âm đệm}

Âm đệm là thành tố đi sau phụ âm đầu trong âm tiết. Trong tiếng Việt
chỉ có một âm đệm là \textipa{/-u-/}, thể hiện trên chữ viết bằng hai
chữ ``u'' và ``o''. Ví dụ, ``hoa'', ``quế''. Trong phát âm, âm đệm chỉ
được thể hiện ở tiếng địa phương miền Bắc và Bắc Trung Bộ, còn trong
tiếng địa phương miền Nam thường không có âm đệm \textipa{/-u-/}.

Trong phát âm Hà Nội, hầu hết loạt phụ âm lưỡi và thanh hầu có thể
phân bố trước âm đệm. Ví dụ, ``toa'', ``đoán'', ``nhoà''~\ldots Riêng
loạt âm môi \textipa{/b, m, v, f/} không phân bố trước âm đệm
\textipa{/-u-/} vì chúng có cấu âm môi giống nhau. Trong tiếng Việt,
hễ những âm có cấu âm giống nhau hay tương tự nhau thì không phân bố
cạnh nhau.

Ngoài các âm môi, một vài phụ âm lưỡi như \textipa{/n, \:z, G/} cũng
rất ít xuất hiện trước âm đệm.

\subsection{Vần}


\subsubsection{Âm đệm}

Trong âm tiết, âm đệm \textipa{/-u-/} đứng sau phụ âm đầu và đứng
trước âm chính. Nó đóng vai tròn một âm lướt trong kết cấu âm tiết. Về
mặt cấu âm, âm đệm \textipa{/-u-/} được phát âm giống như nguyên âm
\textipa{[u]} nhưng không làm đỉnh âm tiết. Đó là một bán nguyên âm
môi-ngạc mềm, được phiên âm là \textipa{[-u-]} hay
\textipa{[-w-]}. Động tác cấu âm này diễn ra đồng thời với các giai
đoạn phát âm của phụ âm đầu và phần vần đầu của nguyên âm làm âm
chính. Về mặt âm học, âm đệm \textipa{/-u-/} có tác dụng làm biến đổi
âm sắc của âm tiết, làm trầm hoá âm sắc của âm tiết.

Âm đệm \textipa{/-u-/}, với tính chất là một bán nguyên âm môi-ngạc
mềm, có độ mở rộng hay hẹp tương ứng với độ mở của nguyên âm đi sau
nó. Trước nguyên âm hẹp \textbf{i}, âm đệm \textipa{/-u-/} được thể
hiện bằng một bán âm hẹp tương ứng là \textipa{[u]}, ví dụ
``tuy''. Trước các nguyên âm có độ mở trung bình \textbf{ê, ơ, â}, âm
đệm  \textipa{/-u-/} được thể hiện bằng một bán âm độ mở vừa
\textipa{[o]}, ví dụ ``khuê'', ``huơ'', ``huân''. Trước các nguyên âm
có độ mở rộng \textbf{e, a, ă}, âm đệm  \textipa{/-u-/} được thể hiện
bằng một bán âm có độ mở tương ứng là \textipa{[O]}, ví dụ ``khỏe'',
``khoắn'', ``khoan''.

Âm đệm  \textipa{/-u-/} xuất hiện phần lớn ở các từ gốc Hán như
``thuyền'', ``loan'', ``uyên''. Về mặt phân bố, như đã nói, âm đệm có
thể xuất hiện sau hầu hết các phụ âm đầu, trừ các phụ âm môi
\textipa{/b, m, f, v/}. Sau các phụ âm môi, âm đệm chỉ có mặt trong
một ít từ phiên âm tiếng nước ngoài như ``buýt'', ``phuy'',
``voan''. Ngoài ra, sau các phụ âm \textipa{/n, \:z, G/}, âm đệm
\textipa{/-u-/} cũng chỉ xuất hiện trong một vài từ như ``noãn'',
``roa'', ``goá''.

Âm đệm \textipa{/-u-/} cũng không xuất hiện trước các nguyên âm tròn
môi \textbf{u, uô, ô, o}. Sự phân bố của âm đệm sau phụ âm đầu và
trước các nguyên âm thể hiện một quy luật của ngữ âm tiếng Việt: các
âm có cấu âm giống nhau hoặc gần gũi nhau không được phân bố cạnh
nhau.

Về mặt chữ viết, âm đệm \textipa{/-u-/} được ghi bằng con chữ ``o''
trước ba nguyên âm rộng \textbf{e, a, ă} và được ghi bằng con chữ
``u'' trước các nguyên âm còn lại. Ví dụ, ``thuý'', ``thuê'', ``loe'',
``loa''. Riêng trường hợp sau phụ âm đầu \textipa{/k-/}, âm đệm
\textipa{/-u-/} luôn được ghi bằng con chữ ``u'' dù sau nó là nguyên
âm rộng. Ví dụ: ``quạ'', ``quý'' (trong những trường hợp này âm
\textipa{/k-/} được ghi bằng con chữ ``q'')\footnote{Do đó về mặt chữ
  viết, sau con chữ ``q'', con chữ ``u'' luôn luôn có giá trị là một
  âm đệm. Điều này giúp ta phân biệt ``ua'' là một nguyên âm đôi trong
từ ``của'' với ``ua'' trong tổ hợp âm đệm+nguyên âm trong
``quả''. Riêng trường hợp ``quốc'' thì ``uô'' là nguyên âm đôi nhưng
\textipa{/k-/} vẫn được ghi bằng ``q''. Sự phân biệt về mặt con chữ ở
đây có giá trị phân biệt nghĩa hai từ đồng âm ``cuốc'' và ``quốc'' đều
được phát âm là \textipa{/kuok/}.}.

Âm đệm \textipa{/-u-/}, vốn là yếu tố có mặt trong phương ngữ Bắc và
Bắc Trung Bộ, lại hoàn toàn vắng mặt trong phương ngữ Nam Bộ. Do đó,
cấu trúc âm tiết của phương ngữ Nam Bộ chỉ có ba thành phần đoạn tính:
âm đầu, âm chính, âm cuối.

Sự vắng mặt của âm đệm trong phương ngữ Nam Bộ có thể đưa đến một số
biến đổi ở âm đầu và âm chính. Đáng chú ý là sự biến đổi của các phụ
âm mặt lưỡi sau và thanh hầu, thành các phụ âm môi. Ví dụ, ``hoa''
thành ``wa'', khuya thành ``phia''.

Hiện nay dưới sự ảnh hưởng của ngôn ngữ văn học, đã thấy xuất hiện âm
đệm sau các phụ âm đầu lưỡi, mặt lưỡi giữa và mặt lưỡi sau trong cách
phát âm của tầng lớp trí thức, của giới trẻ, trừ trường hợp hai phụ âm
thanh hầu \textipa{/h-,P-/} và phụ âm mặt lưỡi sau \textipa{/k-/}, vẫn
được phát âm thành \textipa{[w-]} trong các từ ``hoa'', ``oa'',
``qua'' (đều phát âm là \textipa{[wa]}).

\subsubsection{Âm chính}

\subsubsection{Âm cuối}


\subsection{Thanh điệu}





\section{Từ}


\section{Từ láy}


\section{Từ ghép}


\section{Chính tả tiếng Việt}


\subsection{Tổng quan về chữ viết tiếng Việt}


% Nổ một tí về chữ quốc ngữ

Chữ viết là một trong những phương tiện giao tiếp hiệu quả. Chữ viết
cho phép vượt qua những giới hạn về không gian và thời gian của tiếng
nói. Nhờ đặc điểm này, chữ viết được sử dụng rộng rãi trong nhiều lĩnh
vực khác nhau của đời sống.

Có nhiều hệ thống chữ viết khác nhau được sử dụng trên thế giới, nhưng
nhìn chung có thể phân thành hai loại chữ viết sau:
\begin{description}
\item[Chữ viết ghi ý] Đây là loại chữ viết biểu hiện từ bằng một ký
  hiệu duy nhất, không liên quan gì đến những âm thanh cấu tạo nên
  từ. Ký hiệu này liên quan với cả từ và do đó cũng gián tiếp có quan
  hệ với ý niệm mà từ đó biểu hiện. Loại này bao gồm chữ Trung Quốc, chữ Ai
  Cập~\ldots

  Vì các ký hiệu chữ viết không phản ánh mặt âm thanh và hình thức ngữ
  pháp của từ mà phản ánh mặt ý nghĩa, nên trong tiếng Trung Quốc
  những từ đồng âm được biểu hiện bằng những chữ hoàn toàn khác nhau.

\item[Chữ viết ghi âm] Đây là loại chữ viết nhằm tái hiện chuỗi âm
  thanh nối tiếp nhau trong từ. Các hệ thống chữ viết ngữ âm học có
  thể ghi âm tiết hay âm tố.
  \begin{description}
  \item[Chữ ghi âm tiết] Mỗi ký hiệu ghi một âm tiết. Dẫn chứng cho
  loại chữ viết này là hệ thống chữ Nhật hiragana và katakana.

  \item[Chữ ghi âm tố] Mỗi ký hiệu ghi một âm tố (hay âm vị). Ví dụ
  như chữ Anh, chữ Pháp, chữ Nga~\ldots

  \end{description}
\end{description}

Hệ thống chữ viết được sử dụng hiện nay của nước ta là chữ quốc
ngữ. Nước ta trước đây vẫn dùng chữ Hán và chữ Nôm. Chữ quốc ngữ được
hình thành từ thời Pháp đô hộ nước ta, được người Pháp sử dụng
trong các văn tự chính thức và càng ngày càng được sử dụng rộng rãi.

Chữ quốc ngữ ra đời cách nay khoảng ba thế kỷ. Đó là công trình của
một nhóm các cố đạo người châu Âu cộng tác cùng một số người
Việt. Người để lại nhiều tác phẩm có giá trị trong giai đoạn đầu của
chữ quốc ngữ là Alexandre de Rhodes.

% Đặc điểm chữ quốc ngữ

Chữ quốc ngữ là một lối chữ ghi âm, dùng chữ cái Latin. Nó dùng những
ký hiệu (tức là những con chữ, mượn từ chữ cái Latin, có thêm các dấu
phụ) để ghi lại những âm vị, âm tố và các thanh điệu tiếng Việt. Chữ
quốc ngữ về căn bản khác với chữ Hán và chữ Nôm. Chữ Hán là lối chữ
ghi ý. Chữ Nôm của chúng ta ngày xưa về căn bản cũng là lối chữ ghi ý,
tuy có nhiều thành phần ghi âm.

So với chữ Nôm, chữ quốc ngữ có tiến bộ rất lớn vì nó là chữ ghi âm
rất giản tiện, sử dụng vài chục ký hiệu giản tiện là có thể biểu diễn
được hệ thống âm thanh tiếng Việt.

So với các hệ thống chữ ghi âm khác như chữ Anh, chữ Pháp thì chữ quốc
ngữ là một hệ thống chữ viết ``còn trẻ'', mới được dùng phổ biến hơn
một thế kỷ nay, nên giữa chữ và âm tương đối có sự phù hợp.

Nguyên tắc chính tả cơ bản của chữ quốc ngữ là nguyên tắc ngữ âm học,
có nghĩa là ``phát âm thế nào thì viết thế ấy'', nên có sự tương ứng
khá lớn giữa chữ viết và phát âm.

% Lỗi chính tả là gì?

% \subsection{Những qui định về chính tả tiếng Việt}



\subsection{Chính tả tiếng Việt}


Nói ngắn gọn, chính tả là toàn bộ những tiêu chuẩn và những qui luật
thực hành chữ viết, bao gồm:
\begin{enumerate}
\item Những luật dùng các con chữ của bảng chữ cái để viết các từ.
\item Luật viết các từ độc lập với những chữ cái khi viết chúng.

  Ví dụ: Cách dùng các dấu câu, cách viết hoa, tên người, tên đất~\ldots 
\end{enumerate}

Chuẩn mực của cách viết thường tuân theo những nguyên tắc khác nhau.

Đối với những luật chính tả liên quan đến việc sử dụng các con
chữ của bảng chữ cái ghi âm, có thể kể đến các nguyên tắc cơ bản sau
đây:

\begin{description}
\item[Nguyên tắc âm vị học] Mỗi âm vị được thể hiện bằng một
  chữ cái, không phụ thuộc vào vị trí của nó trong các từ và tổ hợp
  từ. 
\item[Nguyên tắc ngữ âm học] Chữ cái phản ánh phát âm của âm vị ở
  những vị trí hay bối cảnh khác nhau.
\item[Nguyên tắc từ nguyên] Nguyên tắc viết theo lịch sử, truyền
  thống. Phản ánh trên chữ viết không phải là trạng thái hiện tại mà
  là trạng thái quá khứ của hệ thống âm thanh. 
\end{description}

Trong bất kỳ một hệ thống chữ viết nào cũng có thể thấy sự kết hợp các
nguyên tắc khác nhau. Nhưng mỗi hệ thống chữ viết có những nguyên tắc
chủ yếu. Chữ quốc ngữ được xây dựng chủ yếu trên nguyên tắc âm vị học
và ngữ âm học. Ngược lại, chữ Pháp và chữ Anh chủ yếu dùng nguyên tắc
từ nguyên, viết theo truyền thống lịch sử.

% Cấu trúc âm tiết:
Âm tiết trong tiếng Việt có 5 thành phần, đó là thanh điệu, âm đầu, âm
đệm, âm chính và âm cuối.

Âm đầu các âm vị phụ âm đảm nhiệm. Các âm tiết mà có chữ trên chữ viết
không ghi phụ âm đầu có thể có âm đầu là âm tắt thanh hầu \textipa{/P/}.

Âm đệm do các âm vị bán nguyên âm \textipa{/-u-/} đảm nhiệm.

Âm chính do các âm vị nguyêm âm đảm nhiệm như trong bảng~\ref{tab:nguyenam}.

\begin{savenotes}
  \begin{table}[htbp]
    \centering

    \begin{tabular}{cc|cc}
      Âm vị&Chữ cái&Âm vị&Chữ cái\\
      \textipa{/i/}&i,y&\textipa{/o/}&ô,ôô\\
      \textipa{/e/}&ê&\textipa{/O/}&o,oo\\
      \textipa{/E/}&e,a&\textipa{/\v{7}/}&â\\
      \textipa{/W/}&ư&\textipa{/\v{a}/}&a,ă\\
      \textipa{/7/}&ơ&\textipa{/ie/}&iê,ia,yê,y\\
      \textipa{/a/}&a&\textipa{/uo/}&uô,ua\\
      \textipa{/u/}&u&\textipa{/W7/}&ươ,ưa\\
    \end{tabular}
    
    \caption{Bảng nguyên âm}
    \label{tab:nguyenam}
  \end{table}
\end{savenotes}

Âm cuối do các âm vị phụ âm bán nguyên âm đảm nhiệm như trong
bảng~\ref{tab:phuamcuoi} và bảng~\ref{tab:bannguyenamcuoi}. 

\begin{table}
  \hfill
  \begin{minipage}{0.4\textwidth}
    \centering

    \begin{tabular}{cc}
      Âm vị&Chữ cái\\
      \textipa{/-p/}&p\\
      \textipa{/-t/}&t\\
      \textipa{/-k/}&c,ch\\
      \textipa{/-m/}&m\\
      \textipa{/-n/}&n\\
      \textipa{/-N/}&ng,nh\\
    \end{tabular}
    
    \caption{Bảng phụ âm cuối}
    \label{tab:phuamcuoi}
  \end{minipage}
  \hfill
  \begin{minipage}{0.4\textwidth}
    \centering

    \begin{tabular}{cc}
      Âm vị&Chữ cái\\
      \textipa{/-u/}&u,o\\
      \textipa{/-i/}&i,y\\
    \end{tabular}
    
    \caption{Bảng bán nguyên âm cuối}
    \label{tab:bannguyenamcuoi}
  \end{minipage}
  \hfill
\end{table}

Trên chữ viết, các âm vị âm đầu được thể hiện như trong bảng~\ref{tab:phuamdau}

%\begin{savenotes}
  \begin{table}[htbp]
    \centering
  \begin{minipage}[htbp]{0.6\textwidth}
    \def\thefootnote{\alph{mpfootnote}}
    \centering

    \begin{tabular}{cc|cc}
      Âm vị&Chữ cái&Âm vị&Chữ cái\\
      \textipa{/b/}&b&\textipa{/m/}&m\\
      \textipa{/f/}&ph&\textipa{/v/}&v\\
      \textipa{/t\super{h}/}&th&\textipa{/t/}&t\\
      \textipa{/d/}&đ&\textipa{/n/}&n\\
      \textipa{/s/}&x&\textipa{/z/}&d,gi\footnote{Dựa vào nguyên tắc từ nguyên để phân biệt}\\
      \textipa{/l/}&l&\textipa{/\:t/}&tr\\
      \textipa{/\:s/}&s&\textipa{/\:z/}&r\\
      \textipa{/c/}&ch&\textipa{/\textltailn/}&nh\\
      \textipa{/k/}&
      q\footnote{Dùng khi đứng trước bán nguyên âm \textipa{/-u-/}}, 
      k\footnote{Dùng khi đứng trước các nguyên âm \textipa{/i,e,E,ie/}},
      c&
      \textipa{/N/}&ngh\footnotemark, ng\\
      \textipa{/x/}&kh&\textipa{/G/}&gh\footnotemark, g\\
      \textipa{/h/}&h&\textipa{/P/}&khuyết\\
    \end{tabular}
    
    \caption{Bảng phụ âm đầu}
    \label{tab:phuamdau}

  \end{minipage}
  \end{table}
%\end{savenotes}

Một số âm như k và  q, gh và g, ngh và ng là cùng âm vị. Tuy nhiên, do
khi hình thành chữ quốc ngữ, ngữ âm tiếng Việt chưa được nghiên cứu
đầy đủ, nên các giáo sĩ đã phải mượn nhiều con chữ ghép trong chữ Bồ
Đào Nha, Hi Lạp, Pháp, Ý~\ldots dẫn đến sự không đồng nhất khi biểu
diễn âm vị.

Hệ thống âm chính tiếng Việt dựa trên cách phát âm Hà Nội bao gồm 9
nguyên âm dài, 2 nguyên âm ngắn, 3 nguyên âm đôi. Tóm gọn các cách
biểu diễn nguyên âm chính gồm: i, y, ê, e, a, ư, ơ, a, u, ô, o, â, ă,
iê, ia, yê, y, uô, y, uô, ươ, ưa.

Các phụ âm cuối được ghi bằng ``ch'' khi đứng sau ca'c nguyên âm i, y,
ê, e, a. Ví dụ: {\em minh, mênh, manh}. Trong các trường hợp khác lại
được ghi bằng ``ng''. Ví dụ: {\em mang, vâng, hồng, xuống}.

Các bán nguyên âm cuối /-u/ ghi bằng ``o'' khi đứng sau các nguyên âm đơn
dài, ở bậc thanh lượng lớn như e, a. Các viết này biểu diễn sự biến
dạng của các bán âm sau các mở rộng. Trong các trường hợp còn lại, bán
nguyên âm này được ghi bằng ``u''.

Các bán nguyên âm cuối /-i/ được ghi bằng ``y'' khi đứng sau các
nguyên âm ngắn ă, a, â. Trong các trường hợp khác nó được ghi bằng
``i''.

Tóm lại, các âm vị cuối được thể hiện bằng những chữ cái: p, t, c, ch,
m, n, ng, nh, u, o, i, y.

Tiếng Việt có sáu thanh điệu. Có ba nguyên tắc bỏ dấu sau:
\begin{description}
\item[Nguyên tắc bỏ đấu khoa học] Dấu thanh được đặt ở âm chính của
  vần, tức là đặt trên hoặc dưới nguyên âm có vai trò quyết định âm
  sắc chủ yếu của âm tiết.
\item[Nguyên tắc thẩm mỹ] (nguyên tắc thứ yếu) Dấu thanh được đặt ở vị
  tri cân đối trong âm tiết. Nguyên tắc này trước đây hay dùng nhưng
  nay trong một số trường hợp nếu đặt dấu thanh sai sẽ làm cho phát âm
  không đúng và hiểu sai nghĩa từ.
\item[Nguyên tắc thực dụng] Dấu thanh thường được đặt vào một con chữ
  nguyên âm chứ không đặt ở giữa hai con chữ, để tiện việc in ấn.
  \begin{itemize}
  \item Nếu âm chính là một nguyên âm đơn thì dấu thanh luôn luôn được
  ghi ở trên hoặc ở dưới âm chính.
  \item Nếu âm chính là một nguyên âm đôi thì tùy trường hợp có thể bỏ
  đấu thanh ở yếu tố thứ nhất hoặc yếu tố thứ hai của âm chính.
  \end{itemize}
\end{description}

\section{Lỗi chính tả}

Theo~\cite{LoiChinhTa} thì:
\begin{verse}
  Chữ viết là hệ thống ký hiệu bằng đường nét đặt ra để ghi tiếng nói
  và có những qui tắc, qui định riêng. Muốn viết đúng chính tả tiếng
  Việt, ta phải tuân theo những qui định, qui tắc đã được xác lập.

  Chính tả là cách viết chữ được xem là chuẩn, tức là viết đúng âm
  đầu, đúng vần, đúng dấu (thanh), đúng quy định về viết hoa, viết
  tắt, viết thuật ngữ.
\end{verse}

\chapter{Cơ sở toán học}
\label{cha:math}
\minitoc\newpage


\section{Bắt lỗi chính tả}

Trình bắt lỗi chính tả có thể được phân loại theo nhiều cách khác
nhau. Nhưng chủ yếu vấn được phân loại từ quan điểm người dùng: khả
năng phát hiện lỗi sai, và khả năng đề nghị những từ thay thế cho lỗi
sai đó.


\subsection{Các loại sai lầm của trình bắt lỗi chính tả}

Khi bắt lỗi chính tả, trình bắt lỗi không tránh khỏi các sai lầm. Có
thể phân ra làm hai loại sai lầm: sai lầm tích cực\footnote{false
  positive} và sai lầm tiêu cực\footnote{false negative}.

Sai lầm tích cực xảy ra khi trình bắt lỗi báo lỗi ở những từ hoàn toàn không sai
chính tả. Sai lầm tiêu cực xảy ra khi trình bắt lỗi bỏ qua những từ bị
sai chính tả. Nói cách khác, trình bắt lỗi cho rằng những từ sai chính
tả này không sai. Sai lầm tích cực có thể tránh được nhờ tăng kích
thước từ điển. Tuy nhiên đây không phải là giải pháp hoàn hảo. Việc
tăng kích thước từ điển sẽ tốn kém. Hơn nữa, càng có nhiều từ thì việc
đề nghị các từ thay thế càng trở nên kém hiệu quả do bị phân tán bởi
những từ rất ít gặp, không thể tập trung vào những lỗi phổ biến.

Sai lầm tiêu cực có thể xem là lỗi không phát hiện được. Phần nhiều
những lỗi này thường đòi hỏi phải hiểu văn bản (ít nhất là một phần
văn bản) để có thế phát hiện lỗi. Những dạng lỗi từ vựng, lỗi cú pháp
thường rơi vào dạng này. Tuy nhiên vẫn có một số lỗi chính tả rơi vào
loại này. Những loại lỗi này được phát hiện nhờ những chương trình bắt
lỗi chính tả cảm ngữ cảnh (((Golding 1995, Golding and Schabes, 1996,
Golding and Roth1999)))

Giải pháp đơn giản để phát hiện lỗi chính tả là dùng một cấu trúc dữ
liệu để lưu tất cả các từ đã biết (được lưu trong từ điển). Các dạng
cấu trúc dữ liệu như bảng băm hoặc cấu trúc dữ liệu dạng cây có thể
được sử dụng (((McIlroy 1982, Peterson 1980)))

Có thể chia thành hai loại lỗi chính là ==orthographic và
lỗi nhập liệu\footnote{typographic}. Lỗi nhập liệu xảy ra khi gõ không
đúng phím cần gõ trên bàn phím. (((Damerau 1994))) xác định bốn thao
tác có thể gây ra lỗi như sau:
\begin{itemize}
\item Tráo đổi một cặp ký tự.
\item Xóa một ký tự đã có.
\item Chèn một ký tự lạ.
\item Thay một ký tự bằng một ký tự khác.
\end{itemize}

Damerau cho rằng 80\% các lỗi là do thực hiện thao tác trên  một lần
(một trong bốn thao tác trên).

Phân loại lỗi theo các thao tác trên dẫn đến một kỹ thuật sửa lỗi đơn
giản được dùng bởi (((Peterson 1980b))). Nếu phát hiện một từ bị sai
chính tả, ta lần lượt thực hiện lại những thao tác trên để phục hồi từ
bị sai chính tả. Những từ được phát sinh, nếu có trong từ điển, sẽ
được lưu vào danh sách những từ đề nghị. Kỹ thuật này thường được gọi
là Đảo ngược lỗi\footnote{Error reversal}.

Chọn từ tốt nhất trong danh sách từ đề nghị là một công việc không dễ
dàng. (((Agirre et al 1998))) mô tả cách lựa chọn trong trường hợp
này, có thể chia làm các nhóm như sau:

\begin{itemize}
\item Sử dụng phân tích cú pháp để loại bỏ những từ sai từ loại, hoặc
  sai các đặc trưng hình thái (số đếm, chữ hoa/chữ thường~\ldots)
\item Khử nhập nhằng ngữ nghĩa để chọn từ phù hợp với ngữ cảnh nhất.
\item Dùng thống kê để chọn từ thường xuất hiện nhất.
\item Những từ có cách viết hoa/thường khác với từ bị sai sẽ bị loại
  (ví dụ, nếu từ viết sai là chữ thường thì các từ đề nghị viết hoa sẽ
  bị loại)
\end{itemize}


\subsection{Vấn đề chữ hoa/chữ thường}

Vấn đề chữ hoa/chữ thường gây nhiều khó khăn cho trình bắt lỗi chính
tả. Trong từ điển, hầu hết các từ là chữ thường. Tuy nhiên cũng có chữ
hoa (tên riêng, từ viết tắt~\ldots). Các quy tắc chính tả về viết hoa
cũng khá phức tạp. Ngoài ra, đôi khi các chữ được viết hoa hoàn toàn
để nhấn mạnh, để làm tiêu đề~\ldots

\begin{enumerate}
\item Đặt $w_t$ là chữ viết thường của $w$.
\item Đặt $c$ là kết quả tìm kiếm $w_t$.
\item Nếu không tìm được $c$, từ bị sai chính tả.
\item Nếu $c$ giống $w$, từ đúng.
\item Đặt $c_c$ là chữ thường, viết hoa chữ cái đầu tiên của $w$. Nếu
  $c$ giống $c_c$, từ đúng.
\item Đặt $c_u$ là chữ hoa của $w$. Nếu $c$ giống $c_u$, từ đúng.
\item Ngược lại, từ $w$ sai.
\end{enumerate}

\subsection{Bắt lỗi chính tả truyền thống}


\subsection{Bắt lỗi chính tả các ngôn ngữ châu Á}


\section{Tách từ}


\subsection{Tách từ mờ}

Điều hiển nhiên dễ thấy là nếu câu bị sai chính tả thì ta không thể
tách từ đúng được. Vấn đề ở đây là phải tách từ trong câu bị sai chính
tả. Do đó không thể áp dụng trực tiếp các thuật toán tách từ thông
thường. 

\cite{Oflazer} khi xử lý hình thái trong tiếng Thổ Nhĩ Kỳ gặp trường
hợp khá giống với trường hợp này. Tác giả phải tách hình thái từ
trong điều kiện từ đó bị sai chính tả. Do đặc tính
ngôn ngữ chắp dính\footnote{agglunative language}, số tiếp vĩ ngữ
nhiều, liên tiếp nhau, gây khó khăn cho việc nhận dạng tiếp vĩ ngữ,
cũng như không thể phân biệt những tiếng nào hợp thành một từ trong
một chuỗi tiếng trong tiếng Việt. Tác giả dùng một hàm độ đo, tạo ra
các tiếp đầu ngữ có khả năng thay thế dựa trên độ đo này, sau đó sử
dụng WFST\footnote{Weighted Finite State Transducer} để tìm chuỗi tiếp
vĩ ngữ thích hợp nhất.

Bài toán nhận dạng tiếng nói trong tiếng Anh cũng gặp trường hợp tương tự
(\cite{Ravishankar}). Sau công đoạn xử lý âm thanh, ta nhận được
một chuỗi các âm tiết (phoneme). Ta phải chuyển nhóm âm tiết này thành
chuỗi từ. Do âm thanh thường bị nhiễu, nên các âm tiết có thể
không chính xác hoàn toàn. Ngoài ra, do đặc tính của tiếng Anh nên
cùng một chuỗi âm tiết có thể suy ra nhiều chuỗi từ khác nhau. Tác giả
sử dụng lưới từ để tạo ra các chuỗi từ có khả năng từ chuỗi âm tiết,
sau đó n-gram trên từ để lượng giá các chuỗi từ.

Theo~\cite{Chang}, có thể dùng nhiều Language Model khác nhau như
character bigram, word bigram, inter-word character bigram (IWCB), POS
bigram, word class bigram. Các bước thực hiện:
\begin{enumerate}
\item Tách đoạn. Dùng cách ký tự như `?' `!' `,'
  `:' `.'~\ldots{} để tách.
\item Thay thế các ký tự nhập nhằng. 
\item Lượng giá Mô hình Ngôn ngữ. Tác giả sử dụng một phiên bản của
  IWCB và SA-class bigram. IWCB là, những từ cùng ký tự đầu tiên được
  nhóm thành 1 class, những từ cùng ký tự cuối cùng được nhóm thành
  class. Bigram dựa trên hai nhóm này. ``Modified'' là tính luôn word
  freq. SA-class bigram dùng SA algorithm để nhóm.
\item So sánh và sửa chữa.
\item Kết xuất.
\end{enumerate}

Dựa trên những nghiên cứu này, có thể thấy giải pháp cho việc tách từ khi bị
sai chính tả, là phát sinh một loạt các từ có khả năng thay thế, với
giả định trong tập từ này sẽ có từ đúng chính tả, thay thế từ sai chính
tả ban đầu. Sau đó sử dụng tách từ tìm một cách tách tốt nhất. Sau khi
tìm được cách tách từ, ta có thể tra từ điển để tìm xem từ nào bị sai.




\subsection{Huấn luyện tách từ}





\chapter{Mô hình}
\label{cha:model}
\minitoc\newpage

% \note{Phân loại lỗi, nguyên nhân gây lỗi}


\section{Lỗi chính tả}


\subsection{Phân loại lỗi}

Theo~\cite{LoiChinhTa}, lỗi bao gồm các loại sau:
\begin{itemize}
\item Lỗi thanh điệu. Chủ yếu là lỗi nhầm lẫn hai thanh hỏi, ngã.
\item Lỗi về âm đầu. Thường lẫn lộn các âm đầu sau: C/K, G/Gh, Ng/Ngh,
  Ch/Tr, S/X, V/D/Gi/R, W/Hw/Ngw/Qu.
\item Lỗi về âm chính. Thường lẫn lộn các âm chính sau: ai/ay/ây,
  ao/au/âu, ăm/âm, ăp/âp, iu/iêu/êu, im/iêm/em, ip/iêp/êp/ep,
  oi/ôi/ơi, om/ôm/ơm, op/ôp/ơp, ong/ông, oc/ôc, ui/uôi, um/uôm, up/(uôp),
  ưi/ươi, ưu/ươu, ưm/ươm, (ưp)/ươp.
\item Lỗi về âm cuối. Thường lẫn lộn chữ ghi các âm cuối trong các vần
  sau:
  an/ang, at/ac, ăn/ăng, ăt/ăc, ân/âng, ât/âc, en/eng, et/ec, ên/ênh,
  êt/êch, in/inh, it/ich, iên/iêng, iêt/iêc, ơn/(ơng), ơt/(ơc),
  un/ung, ut/uc, uôn/uông, uôt/uôc, ưn/ưng, ưt/ưc, ươn/ương, ươt/ươc.
\item Sai quy cách viết hoa
\end{itemize}

\noindent Theo \cite{Tuoi}, lỗi được phân làm hai loại:
\begin{itemize}
\item Từ bị sai không nằm trong từ điển. (do sai dấu hỏi---ngã, bỏ dấu
  không đúng vị trí, gõ nhầm ký tự trên bàn phím, gõ thiếu ký tự, gõ
  dư ký tự, gõ sai do gõ theo cách phát âm từng vùng, gõ nhầm vị trí
  các ký tự trong từ~\ldots)
\item Từ bị sai nhưng vẫn có trong từ điển. (sai cách phát âm, nhầm ký
  tự, bỏ dấu sai, thiếu/thừa ký tự~\ldots)
\end{itemize}

\noindent Theo \cite{Chang} thì lỗi bao gồm:
\begin{itemize}
\item Giống phiên âm
\item Giống hình dạng chữ viết
\item Giống nghĩa
\item Giống cách gõ
\end{itemize}

\section{Xử lý lỗi chính tả}
%Nêu tổng quan, nói cụ thể hơn ở phần sau ``previous work''

Với \cite{Tuoi} thì việc xử lý lỗi bao gồm:
\begin{itemize}
\item Từ không có trong từ điển thì bắt lỗi ở cấp từ vựng.
\item Từ có trong từ điển thị bắt lỗi ở cấp cú pháp.
\end{itemize}

%% Với \cite{Chang}, giải pháp gồm:
%% \begin{itemize}
%% \item Composite confusing character substitution
%% \item Advanced word class bigram language. LM score is composed base
%%   language model score and substitution penalty score.
%% \end{itemize}

%% qua các bước:
%% \begin{enumerate}
%% \item Input and Clause Segmentation
%% \item Composite Confusing Character Substitution
%% \item Language Model Evaluation
%% \item Comparision and Correction
%% \item Output
%% \end{enumerate}

Việc tìm lỗi dựa chủ yếu trên từ điển. So sánh từng từ trong câu với từ điển, những từ
không có trong từ điển là những từ có khả năng bị lỗi. Sau đó dựa trên
một số thuật giải hoặc các độ đo để tìm ra từ gần đúng với từ đó, chọn làm
từ đề nghị.

Việc tự động sửa lỗi chủ yếu dựa trên một tập các từ hay bị lỗi (then-than,
there-their~\ldots), sử dụng ngữ cảnh xung quanh để xác định từ đúng
hay sai.

Đối với ngôn ngữ đơn lập như tiếng Việt, vấn đề mới phát sinh là không
thể xác định rõ ràng ranh giới từ. Với tiếng Anh và các ngôn ngữ biến
cách khác, khoảng trắng thường được dùng để phân cách hai từ. Trong tiếng Việt,
khoảng trắng được dùng để phân cách hai tiếng. Ngoài ra, việc định
nghĩa từ trong tiếng Việt vẫn chưa thống nhất~\cite{worddef}. Luận văn
này sử dụng ``từ'' như là ``từ từ điển''.  

Để bắt lỗi chính tả trong tiếng Việt, có thể dựa trên nhiều cách khác
nhau. Cách đầu tiên đơn giản là tìm ranh giới từ cho tiếng Việt, sau
đó chuyển về bài toán bắt lỗi chính tả của tiếng Anh, dựa trên từ
điển. Cách khác là bắt lỗi mà không cần tách từ~\cite{Tuoi}
Cách nữa dựa trên ý tưởng ``phân tích cú pháp câu, nếu ta không thể
phân tích cú pháp của câu, nghĩa là câu đó sai chính tả''~\cite{iccc}.

Luận văn này làm theo hướng tách từ, sau đó tìm lỗi chính tả dựa trên
từ điển.



\subsection{Tách từ}

\note{Liệt kê các phương pháp tách từ}

Bài toán tách từ cho ngôn ngữ đơn lập đã được đặt ra từ lâu, chủ yếu
để giải quyết cho tiếng Trung Quốc, tiếng Nhật. Các thuật toán tách từ có thể
được phân loại như sau:

\begin{description}
\item[Dựa theo luật] 
  \begin{itemize}
  \item Longest Matching, Greedy Matching Models (Yuen Poowarawan, 1986;
    Sampan Rarurom, 1991)
  \item Maximal Matching Models. This model is divided into ``forward
    maximum match'' and ``backward maximum match'', for which the fully
    comprehensive dictionary is indispensible. However, it is obvious
    that there is no comprehensive dictionary and depending on different
    contexts that this model requires suitable dictionaries.
    \begin{itemize}
    \item Thai, Sornlertlamvanich (1993).
    \item Chinese, Chih-Hao Tsai (1996), MMSeg 2000.
    \end{itemize}
  \end{itemize}
\item[Dùng thống kê]
  This approach on the word context in considering
  the information of the neighboring words to issue revelant
  decisions. There are two points to be resolved for this approach,
  which are the context width and applied statistical method. As far
  as the context is concerned the wider the more complex.

  As far as the context is concerned, the first-order HMM has always
  been applied. However, this method greatly depends on the corpus for
  its training. In case one method is applicable for the political
  corpus, it can not be applied to literal ones. In addition, there
  are some words of high probability but of syntactical function only,
  which lessens the role of probability.
  \begin{itemize}
  \item HMM, based on Viterbi algorithm. (Asanee Kawtraku, 1995;
    Surapant,1995).
  \item EM. Xianping, 1996.
  \end{itemize}
\item[Các cách khác]
  Most of these approaches are hybrid in combination with such other
  linguistic models as WFST, TBL (Julia, 1996). However, due to the
  requirement of various manipulation, the processing becomes quite
  time-consuming but it accuracy proves to be high.

  However, the linguistic knowledge, which is applied in the
  rule-based models, is rarely found in all the above models.
\end{description}

\cite{Sproat} sử dụng WFST để tách từ, huấn luyện bằng EM dựa trên
cách tách từ đúng nhất.

\cite{wordseg} sử dụng giải pháp tương tự như \cite{Sproat} nhưng cải
tiến bằng cách cáp dụng Neural Networks để giải quyết nhập nhằng dựa
vào POS. Nghiên cứu đề cập đến một số vấn đề tiền xử lý tiếng Việt như
xác định tên riêng, từ láy, phân tích hình thái.

\cite{Ravishankar} đề nghị tạo ra lưới từ\footnote{word lattice} sau
đó sử dụng thuật toán tìm đường đi ngắn nhất để tìm cách tách từ tốt
nhất dựa trên 2-gram hoặc 3-gram.

\cite{LAH} sử dụng n-gram và quy hoạch động để tách từ,
không dùng từ điển. Giải pháp này tương tự như \cite{softcount}, tuy
nhiên chỉ tính xác suất cách tách từ tốt nhất thay vì tính tổng xác
suất mọi cách tách từ như trong \cite{softcount}.

\cite{Chunyu} kết hợp ngram, lập trình quy hoạch động để tách từ. Xài
soft-count thay vì ``hard-count'' như \cite{Chang}. \cite{Chunyu} còn
đề nghị dùng case-based learning.

\subsection{Huấn luyện tách từ}

\note{Tại sao không xài bộ tách từ đã có?} Hai vấn đề:
\begin{itemize}
\item Chất lượng của bộ tách từ hiện có. (2-gram tốt hơn unigram~\ldots...)
\item Nếu thống kê trên mọi cách tách từ thì không thể dùng bộ tách từ
  hiện có vì chỉ tạo ra kết quả sau cùng.
\end{itemize}


Có thể huấn luyện dựa trên dữ liệu mẫu, hoặc dữ liệu thô. Do hầu hết
các phương pháp tách từ đều dựa trên ngram ($n\ge 1$) nên rất cần có
khối lượng dữ liệu huấn luyện lớn nhằm đạt tính bao quát. Dữ liệu
mẫu, được tách từ sẵn, thường không đủ để huấn luyện. Giải pháp chủ
yếu là huấn luyện dựa trên dữ liệu thô, chưa tách từ.

Thuật toán thường dùng nhất để huấn luyện trên dữ liệu thô là thuật
toán EM. Nhiều người đã cố gắng cải tiến EM theo nhiều cách khác nhau
nhằm nâng cao chất lượng huấn luyện, đồng thời hạn chế những khuyết
điểm của EM. 

\cite{self-supervised} đề nghị cách giải quyết hạn chế ``tối ưu cục
bộ'' của EM, bằng cách phân phối lại từ vựng sau mỗi lần chạy và khởi
động lại EM với điểm khởi đầu tốt hơn.

\cite{text-tiling} sử dụng một lượng nhỏ ngữ liệu huấn luyện có chất
lượng cao (\textit{seed set}) và một lượng lớn ngữ liệu có chất lượng
không thật bảo đảm (\textit{training set}), xử lý qua 4 bước:
\begin{enumerate}
\item \textbf{Phân đoạn tập huấn luyện}
\item \textbf{Phân hạng tập huấn luyện}
\item \textbf{Tổ hợp tập huấn luyện}
\item \textbf{Language model pruning}
\end{enumerate}



\section{Mô hình chung}

Việc bắt lỗi chính tả của một văn bản được xử lý lần lượt qua những
bước sau:
\begin{enumerate}
\item \textbf{Tiền xử lý} Tách văn bản thành những đoạn ngắn. Tách
  đoạn thành từng tiếng. Đánh dấu các ký hiệu, dấu ngắt dòng, các số,
  tên riêng~\ldots
\item \textbf{Bắt lỗi tiếng} Kiểm tra các tiếng với các tiếng đã có
  trong từ điển. Báo lỗi những tiếng không có trong từ điển. Sau đó 
  \textbf{Đưa ra giải pháp thay thế}.
\item \textbf{Tạo lưới từ} Tìm ra mọi từ có thể có trong câu. Xem
  giải thích về lưới từ bên dưới. Lồng trong phần này là phần
  \textbf{Phát sinh từ thay thế}
\item \textbf{Tách từ} Dựa vào lưới từ, đưa ra cách tách từ tốt nhất.
\item \textbf{Bắt lỗi từ} Dựa vào từ điển và cách tách từ đã có,
  tìm những từ nào không có trong từ điển. Những từ này được xem là từ
  sai. Sau đó \textbf{Đưa ra giải pháp thay thế}
\end{enumerate}

\section{Tiền xử lý}
\label{sub:preprocess}

Dựa vào flex để tách thành các token. Mục đích là để tách các dấu câu
ra khỏi tiếng. Ví dụ \fbox{"chào"} sẽ được tách thành 3 token
\fbox{"} \fbox{chào} \fbox{"}. Quy tắc được dùng như sau:

\begin{verbatim}

SENTENCE_FINAL                  [.?!]
HYPHEN                          [\-]
OPEN_SINGLE_QUOTE               [\`]
CLOSE_SINGLE_QUOTE              [\']
RIGHT_PAREN                     [\"\)\]\}\>\']


LETTERS_AND_NUMBERS             [a-zA-Z0-9]
LETTERS_NUMBER_AND_THEN_SOME    [a-zA-Z0-9]
APOSTROPHE                      \'

SINGLE_CHARACTER                [a-zA-Z0-9]

WHITE_SPACE                     [ \t\n]
NEWLINE                         [\n]
INVISIBLE                       [^\040-\176]


{SENTENCE_FINAL}+{RIGHT_PAREN}*                                 |
{HYPHEN}+                                                       |
{OPEN_SINGLE_QUOTE}+                                            |
{CLOSE_SINGLE_QUOTE}+                                           |

{LETTERS_NUMBER_AND_THEN_SOME}+{LETTERS_AND_NUMBERS}            |
{LETTERS_AND_NUMBERS}+{APOSTROPHE}                              |

{SINGLE_CHARACTER}                   { xuất từ }

({WHITE_SPACE}|{INVISIBLE}|{NEWLINE})+                { bỏ qua }

\end{verbatim}


\subsection{Tách câu}

Dựa vào các dấu câu để ngắt câu ra thành từng đoạn để xử lý. Mỗi
đoạn sẽ được xử lý độc lập với nhau. Đoạn ở đây có thể là một câu,
nhưng cũng có thể là một 
phần của câu. Luận văn này sẽ dùng từ ``câu'' để ám chỉ ``đoạn''. Nếu
các thông tin ở mức cao hơn được sử dụng (như thông tin cú pháp, ngữ
nghĩa~\ldots) thì phải thật sự xử lý trên câu chứ không phải trên 
đoạn. Các đoạn được phân cách bởi các dấu câu \fbox{.} \fbox{,}
\fbox{;} \fbox{(} \fbox{)}~\ldots 

\subsection{Chuẩn hoá}

Do trong tiếng Việt có nhiều từ có thể viết theo các
cách khác nhau về vị trí dấu thanh điệu, ví dụ, ``hoà'' và
``hòa''. Bởi vậy cần phải chuẩn hoá sao cho chương trình xem ``hòa''
và ``hoà'' là một. Giải pháp đưa ra là tách dấu thanh điệu ra khỏi
từ, biểu diễn dấu thanh điệu bằng ký tự đầu tiên trong từ. Như vậy,
``hoà'' và ``hòa'' đều có cùng cách biểu diễn là ``2hoa'', trong khi
đó ``hoa'' được biểu diễn là ``0hoa'', ``hồng'' được biểu diễn là
``2hông''.

\subsection{Chữ viết hoa}

Xử lý chữ viết hoa. Chữ viết hoa dùng để biểu diễn tên riêng, từ viết
tắt hoặc dùng cho chữ đứng đầu câu. Do đó cần phân biệt chữ đầu câu có
phải là chữ bắt đầu tên riêng hay không. Ngoài ra, cần xác định tên riêng khi
tìm được chữ viết hoa bắt đầu tên riêng. Các văn bản tiếng Việt chưa
hoàn toàn thống nhất về quy tắc viết hoa. Ví dụ, có tài liệu dùng
``Cộng hoà Xã hội Chủ nghĩa Việt Nam'', nhưng có tài liệu lại dùng
``Cộng Hoà Xã Hội Chủ Nghĩa Việt Nam''.

Do văn bản đầu vào có khả năng bị sai chính tả nên không thể xác định
ngay chính xác có phải là cụm từ viết hoa đúng hay không. Bước này cố
gắng phát hiện ra những cụm từ viết hoa và thêm vào lưới từ. Do vậy,
phần này được thực hiện bên trong phần \textbf{Phát sinh từ thay thế}. 

Có thể dùng thuật giải như sau: Nếu bắt đầu bằng chữ viết hoa, và chữ
đầu được viết thường cùng những từ kế tiếp của nó là một từ trong từ
điển, thì xem như đó là một từ. Nếu một chuỗi từ viết hoa liên tục
(hai từ trở lên) thì xem như đó là một từ (một tên riêng), và được
đánh dấu từ lạ $UNK$.

Với tên riêng của người Việt. Một danh sách các tên tiếng Việt được
thu thập nhằm rút ra những chữ thường dùng khi đặt tên. Những chuỗi
các chữ hoa liên tiếp được hình thành từ những chữ trong danh sách này
sẽ được xem như là tên riêng, đánh mã $PROP$.


%% \begin{algo}[Xử lý chữ hoa]
%% \label{algo:propername}
%%   \begin{enumerate}
%%   \item Lấy 1 chữ. Kiểm tra ký tự đầu tiên xem có phải ký tự hoa hay
%%     không.
%%   \item Nếu đây là chữ đầu câu, phát sinh bình thường dựa theo bản
%%     viết thường của chữ này. Ngoài ra tiếp tục thực hiện các bước
%%     dưới.
%%   \item Duyệt từ chữ đó trở đi, lấy chuỗi dài nhất có thể dựa trên
%%     $sid$. Phát sinh từ mới dựa trên từ lấy được. Đặt xác suất 0.80.
%%   \item Nếu không tìm được từ nào, duyệt lại như bước trên, dùng
%%     $scid$.
%%   \item Nếu chữ kế tiếp cũng là chữ hoa, duyệt từ đó trở đi để lấy
%%     chuỗi chữ hoa dài nhất ($scid$). Phát sinh từ mới
%%     mã $PROP$. 
%%   \end{enumerate}
%% \end{algo}

\subsection{Từ láy UNIMPL}

Phần này được thực hiện bên trong phần \textbf{Phát sinh từ thay thế}.

\begin{itemize}
\item Láy toàn bộ (Vd. ba ba, chuồn chuồn~\ldots)
\item Láy âm đầu (Vd. chặt chẽ, trong trẻo~\ldots)
\item Láy điệp vần (Vd. lông bông, lã chã~\ldots)
\item Láy điệp âm, láy vần (Vd. thủ thỉ, tủm tỉm~\ldots)
\item Hai thanh của tiếng thường ở cùng một hệ~\ldots
\end{itemize}

\note{Hổng thèm làm :-)} Vấn đề từ láy cũng tương tự như  tên riêng. Giải
pháp có thể áp dụng là dựa vào các quy tắc tạo từ láy để phát hiện
những từ có khả năng là từ láy và thêm vào lưới từ. 

Đối với các từ láy trên 2 tiếng. Do số lượng các từ láy dạng này không
nhiều nên có thể thêm các từ láy này vào từ điển.
%% Nhưng những ``từ láy''
%% ``nhưng những'' có thể giết chết module tách từ một cách êm dịu. Chắc
%% nên áp dụng giải pháp ``80 từ láy, 20 từ thường''. Không biết được hay
%% không, phiêu quá~\ldots

\begin{algo}[Xử lý từ láy]
\label{algo:poem}
  \begin{enumerate}
  \item Lấy 2 chữ liên tiếp.
  \item Kiểm tra quy tắt từ láy.
  \item Nếu đúng, phát sinh thêm từ láy mới, mã $POEM$.
  \end{enumerate}
\end{algo}

%% Có lẽ nên lọc ra danh sách từ láy bằng tay, đánh nhãn toàn bộ là
%% $POEM$, hoặc dùng nhãn riêng. Heuristic này không đáng tin lắm.
%% Cách hình thành từ láy của con người như thế nào ?? Từ láy thường gắn
%% liền với hình tượng, cảm giác gì đó. Làm sao người ta có thể cảm nhận
%% được một từ có phải là từ láy hay không??

\subsection{Từ nước ngoài, từ viết tắt, các ký hiệu~\ldots}

\note{Coi như từ sai chính tả}
\note{không phân biệt từ nước ngoài và từ sai chính tả}
Xử lý tiếng nước ngoài, các ký hiệu chuyên ngành, các từ viết tắt. Do
trình bắt lỗi không có kiến thức về các lĩnh vực chuyên 
ngành, cũng như các thứ tiếng trên thế giới, nên việc áp dụng tri thức
để phân loại là điều hết sức khó khăn. Giải pháp được dùng ở đây là
coi tất cả những từ nước ngoài, từ viết tắt, ký hiệu~\ldots đều là sai
chính tả, trừ khi được người dùng được vào danh sách từ nước ngoài, từ
viết tắt. Các con số được đánh dấu riêng bằng mã $NUM$.
``Số'' ở đây được coi là bất cứ chữ nào bắt đầu bằng số. Ví dụ, ``0lit'',
``0.2'', ``0-4''~\ldots{} đều được coi là số. 

\section{Phát sinh từ thay thế}

Phần này được sử dụng trong lúc tạo lưới từ và kiểm tra chính
tả. Mục đích là, cho trước một từ, phát sinh những từ ``gần giống''
với từ đó. Việc định nghĩa như thế nào là ``giống'' ở đây dựa theo các
nguyên nhân gây ra lỗi chính tả:
\begin{itemize}
\item Lỗi phát âm. Ví dụ, ``vu'' và ``du''. 
\item Do lỗi bàn phím. Có thể do gõ nhầm những phím lân cận. Ví dụ: gõ
  ``tôi'' thành ``tôu''. Khắc phục lỗi này dựa vào bố trí phím trên
  bàn phím. Độ đo là khoảng cách từ phím tạo ra ký tự trong từ cho
  trước và những từ chung quanh. Thông thường lỗi này chỉ xảy ra một
  lần trong mỗi từ. Ngoài ra còn lỗi liên quan đến cách kiểu gõ tiếng
  Việt.
\item Lỗi OCR\footnote{Optical Character Recognition}. Lỗi dạng này
  phụ thuộc nhiều vào phông chữ được dùng trên văn bản giấy. Tuy nhiên
  vẫn có một số lỗi chung như ``a'' và ``c'', ``d'' và ``cl''~\ldots
\item Lỗi sai về mặt từ vựng, cú pháp. Lỗi này hiện thời không xử lý
  do cần nhiều tri thức về ngôn ngữ tiếng Việt.
\item Lỗi không rõ nguyên nhân. Với dạng lỗi này, ta dùng hàm độ đo,
  tính số lần thêm/xóa/thay đổi/hoán vị mỗi ký tự giữa hai từ. Hàm độ đo
  được dùng được nêu trong \cite{Oflazer}, sẽ được trình bày lại bên
  dưới.
\end{itemize}

%% \note{Hmm..} có lẽ nên gắng thêm vào các từ phát sinh một ``hệ số chính
%% xác''. Từ gốc là từ có hệ số chính xác cao hơn so với các từ được phát
%% sinh. Good or bad? Hmmm... Làm sao để làm? Hmmm Hmmm

\subsection{Lỗi phát âm}

Lỗi phát âm phụ thuộc vào cách phát âm của từng
vùng. \cite{LoiChinhTa} liệt kê các trường hợp lỗi thông dụng
nhất. Những quy tắc này được áp dụng để, ví dụ, từ   ``du'' ta tạo ra
``vu''. 

Để phát sinh từ dựa trên lỗi phát âm, cần phân tích cấu trúc của từng
tiếng. Một tiếng bao gồm âm đầu, vần và thanh. Vần gồm âm đệm, âm
chính và âm cuối. Trong các thành phần của tiếng, âm chính là bắt buộc
phải có. Các thành phần còn lại có thể không có. Ta có thể biểu diễn
cấu trúc âm tiếng theo sơ đồ trạng thái như hình~\ref{fig:syllable}.

\begin{figure}[htbp]
  \centering
  \includegraphics[width=\textwidth]{syllable}
  \caption{Sơ đồ trạng thái phân tích cấu trúc tiếng}
  \label{fig:syllable}
\end{figure}

Khi phân tích tiếng, có thể có một số nhập nhằng giữa các thành phần
của tiếng. Vd, ``lúa'' bao gồm âm chính ``ua'' hay âm đệm ``u'' và âm
chính ``a''~\ldots

Ta có thể phân tích tiếng dùng FST. Tuy nhiên, qua
 hình~\ref{fig:syllable}
 có thể thấy chỉ có tám cách để hình thành
tiếng. Cài đặt theo tám cách này đơn giản và hiệu quả hơn dùng FST
tổng quát. Việc sắp xếp thứ tự áp dụng từng cách và một số heuristic
sẽ giúp loại bỏ nhập nhằng khi phân tích tiếng. 

\subsection{Lỗi bàn phím UNIMPL}

Chương trình giả định sơ đồ bố trí của bàn phím EN-US được dùng. Do
thông thường chỉ gặp một lỗi gõ nhầm với phím ngay bên cạnh này mỗi
từ, nên chương trình chỉ lưu danh  sách những phím lân cận với từng
phím, dựa trên bàn phím EN-US. Ví dụ: $A \rightarrow (S,Q,W,X,Z)$. 

Với những phím có hai ký tự như phím `2' (2 và @) thì @ sẽ được thêm
vào tập các phím lân cận với 2 và ngược lại.

Do với mỗi phím có khoảng 8 phím lân cận. Một chữ dài trung bình 8 ký
tự sẽ phát sinh ra một tập $8^8$ các chuỗi có khả năng. Trong số này
chỉ có một số rất ít là chữ thật sự, đúng quy tắc chính tả. Tuy nhiên
việc xử lý một khối lượng lớn như vậy là không thể. Vì vậy chương
trình giả định chỉ nhập gõ sai tối đa hai phím với mỗi chữ, nhằm giảm
thiểu bùng nổ tổ hợp.

Với các kiểu gõ như VNI, TELEX. Chương trình cố gắng ``phục hồi'' từ
những chữ gõ sai nếu phát hiện được. Vd, ``nguyê4n'' sẽ tạo ra
``nguyễn''. Ta cài đặt bộ gõ VNI, TELEX, sau đó đưa chuỗi các ký tự
của chữ đang xét qua bộ gõ phục hồi các dấu. Bước này được thực hiện
sau bước trên, để nếu gõ nhầm phím dấu kế bên thì vẫn có thể phục hồi
lại.

% Hmm.. phần phục hồi ngược từ VNI, TELEX. Vd, englíh (english). Cái này
% nhường cho English Speller. Hơi vướng với VIQR.

\subsection{Lỗi không rõ nguyên nhân UNIMPL}

\label{algo:ed}
Lỗi này dựa vào {\em độ đo khoảng cách hiệu chỉnh} được đề cập
trong \cite{Oflazer}. Các thao tác hiệu chỉnh được đo gồm {\em chèn,
xóa, thay thế một ký tự} hoặc {\em hoán vị hai ký tự kề nhau}, để có
thể chuyển đổi từ này thành từ kia. Đặt $X = x_1, x_2, \ldots, x_m$ và
$Y = y_1,y_2,\ldots,y_n$ là hai chuỗi có độ dài tương ứng là $m$ và
$n$. $X[i]\quad(Y[j])$ biểu diễn chuỗi con ban đầu của X (Y) từ đầu từ
đến ký tự thứ $j$. Cho $X$ và $Y$, độ đo $ed(X[m],Y[n])$ được tính như
sau:
\begin{equation}
\begin{array}{rll}
  ed(X[i+1],Y[j+1]) &= ed(X[i],Y[j]) & \text{nếu $x_{i+1}=y_{j+1}$
  (ký tự cuối như nhau)}\\
                    &= 1+min\{ed(X[i-1],Y[j-1]), & \text{nếu $x_i=y_{j+1}$}\\
                    &\qquad\qquad ed(X[i+1],Y[j]), & \text{và $x_{i+1}=y_j$}\\
                    &\qquad\qquad ed(X[i],Y[j+1])\}\\
                    &= 1+min\{ed(X[i],Y[j]),&\text{trường hợp khác}\\
                    &\qquad\qquad ed(X[i+1],Y[j]),\\
                    &\qquad\qquad ed(X[i],Y[j+1])\}\\
  ed(X[0],Y[j])     &=j & 0 \le j \le n\\
  ed(X[i],Y[j])     &=i & 0 \le i \le n\\\\
  ed(X[-1],Y[j])    &=ed(X[i],Y[-1]) = max(m,n)&\text{Biên}
\end{array}
\end{equation}

Thuật toán có thể được khử đệ quy khi cài đặt bằng quy hoạch
động. Nhận thấy $ed(X[i+1],Y[i+1])$ cần dùng
$ed(X[i],Y[i])$,$ed(X[i-1],Y[i-1])$,$ed(X[i],Y[i+1])$ hoặc
$ed(X[i+1],Y[i])$, ta có thể tính từ lần lượt từ thấp đến cao theo
đường zig-zag bắt đầu từ đỉnh (1,1), sau đó đến đường chéo phụ (1,2),
(2,1), rồi đường chéo (1,3),(2,2),(3,1)~\ldots

\begin{algo}[Tính hàm ed()]
  \begin{enumerate}
  \item Đặt (0,0) là 0 nếu x[0] = y[0] hoặc 1 nếu ngược lại.
  \item Đặt (0,j) là j
  \item Đặt (i,0) là i
  \item (i,j)=(i-1,j-1) nếu x[i]=y[j]
  \item (i,j)=1+min\{(i-2,j-2),(i,j-1),(i-1,j)\} nếu x[i] = y[j-1]
    hoặc x[i-1]=y[j]
  \item (i,j)=1+min\{(i-1,j-1),(i,j-1),(i-1,j)\} trong các trường hợp còn lại
  \end{enumerate}
\end{algo}

Ví dụ: tính độ sai khác giữa chữ ``thắng'' và ``tắgn''. Ta tính các
giá trị như bảng~\ref{tab:ed-example}. Vậy có hai khác biệt giữa hai
chữ. Khác biệt thứ nhất là xoá ký tự `h'. Khác biệt thứ hai là hoán vị
hay ký tự `n' và `g'.

\begin{table}[htbp]
  \centering
  \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
    X&-&-&t&ắ&g&n\\\hline
    -&0&0&0&0&0&0\\\hline
    -&0&0&1&2&3&4\\\hline
    t&0&1&\bf 0&\bf 1&\bf 2&\bf 3\\\hline
    h&0&2&\bf 1&\bf 1&\bf 2&\bf 3\\\hline
    ắ&0&3&\bf 2&\bf 1&\bf 1&\bf 2\\\hline
    n&0&4&\bf 3&\bf 2&\bf 2&\bf 1\\\hline
    g&0&5&\bf 4&\bf 3&\bf 2&\bf 2\\\hline
  \end{tabular}
  \caption{Bảng $ed$ của ``thắng'' và ``tắgn''}
  \label{tab:ed-example}
\end{table}

\section{Tạo lưới từ}
\label{sub:lattice}
Lưới từ\footnote{word lattice} là một đồ thị có hướng không chu trình,
với các nút là các từ trong câu, cạnh là đường nối giữa hai từ kề
nhau, hướng thể hiện hướng của câu (từ trái sang phải). Lưới từ
chứa tất cả 
các từ có khả năng xuất hiện trong câu. Các từ được liên kết với nhau
theo trật tự trong câu. Khi duyệt từ nút gốc đến nút đích, ta sẽ được
một cách tách từ cho câu. Xem hình~\ref{fig:wordlattice}.

\begin{figure}[htbp]
  \centering
  \includegraphics[width=\textwidth]{wordlattice}
  \caption{Lưới từ của câu ``Học sinh học sinh học''}
  \label{fig:wordlattice}
\end{figure}

Khi tạo lưới từ trong chương trình bắt lỗi chính tả, thuật toán không
chỉ phát sinh những từ được tạo từ đoạn, mà còn những từ {\em có thể
có} được phát sinh từ đoạn. Xem hình~\ref{fig:wordlattice1}.

\begin{figure}[htbp]
  \centering
  \includegraphics[width=\textwidth]{wordlattice1}
  \caption{Lưới từ mở rộng của câu ``Học sinh học sinh học''}
  \label{fig:wordlattice1}
\end{figure}

Lưới từ được tạo bằng thuật toán Viterbi. Mỗi tiếng trong câu được
duyệt qua để tìm ra tất cả các từ có thể có trong đoạn. Sau đó tập hợp
các từ này lại. 

\begin{algo}[Tạo lưới từ (cơ bản)]
Cho câu S có n tiếng. State là đỉnh, còn ``nút i'' là cạnh. Ta duyệt
lần lượt qua các cạnh để tìm  ra các từ. Duyệt i từ 1 đến n:
\begin{itemize}
\item Tạo state gốc cho nút i.
\item Xét các state, nếu tiến thêm được một bước thì lưu lại state mới (i+1).
\item Nếu không tiến được thì xóa state.
\item Nếu hoàn tất một từ thì lưu lại.
\end{itemize}
\end{algo}

Sau khi hoàn tất, đánh dấu tất cả các chữ xuất hiện trong các từ tìm
được. Do từ điển không hoàn chỉnh, và do các ký hiệu, từ viết
tắt~\ldots{},
 sẽ có một số chữ không nằm trong bất kỳ từ nào tìm được. Do
đó ta cần duyệt lại, và đánh dấu những chữ này là từ ``UNK''. Việc tạo
thêm các từ $UNK$ sẽ đảm bảo tạo ra một đồ thị liên thông. Nếu đồ
thị không liên thông, ta không thể áp dụng thuật toán tìm đường đi
ngắn nhất.

Ngoài lưới từ cơ bản, ta có thể tạo lưới 2-từ. Lưới 2-từ
tương tự như lưới từ, tuy nhiên mỗi nút là một cặp 2 từ đi liền nhau
trong câu. Thuật toán tạo lưới 2-từ được nêu trong \cite{Ravishankar},
được tóm tắt lại như sau (xem hình~\ref{fig:wordlattice2}):

\begin{figure}[htbp]
  \centering
  \includegraphics[width=\textwidth]{wordlattice2}
  \caption{Lưới 2-từ của câu ``Học sinh học sinh học''}
  \label{fig:wordlattice2}
\end{figure}

\begin{algo}[Tạo lưới n-từ từ lưới (n-1)-từ]
\begin{enumerate}
\item Nếu nút ($w$) có $n$ từ đứng liền trước nó ($w_i$),
  $i=1,2,\ldots,n$ trong lưới từ gốc, nó sẽ được lặp lại $n$ lần trong
  lưới từ mới, tên là ($w_{i}w$), tương ứng với $i=1,2,\ldots,n$.
\item Nếu ($w_i$) nối với ($w_j$) trong lưới từ gốc, nối tất cả
  ($w_xw_i$) với ($w_iw_j$) $x$ bất kỳ.
\item Giá trị của ($w_iw_j$) là giá trị của cạnh ($w_i$) ($w_j$) trong
  lưới từ cũ.
\item Giá trị của cạnh ($w_iw_j$) ($w_jw_k$) là 3-gram của $w_i$, $w_j$
  và $w_k$.
\end{enumerate}
\end{algo}

%% Các lưới n-từ có đặc điểm là tăng nhanh số nút và số cạnh, nhưng số
%% tầng vẫn không đổi (Đồ thị càng ngày càng ``mập'', nhưng ``cao''
%% không nổi ;-) )


\subsection{Lưu lưới từ}

Các nút trong lưới từ được lưu tập trung vào một mảng
(WordEntries). Truy cập nút được thực hiện thông qua index của mảng
này. Mỗi nút chứa các thông tin về từ của nút đó, bao gồm vị trí từ,
số tiếng, index trong WordEntries~\ldots{}

Words là một mảng tương ứng với vị trí từng tiếng trong câu. Vị trí
của mỗi tiếng sẽ được liên kết với một danh sách các từ bắt đầu tại
tiếng đó. Ta có thể coi danh sách này như danh sách các cạnh nối từ
nút đang xét đến các nút kế tiếp.


\section{Tách từ}
\label{sub:wordseg}

Dùng thuật toán tìm kiếm theo độ ưu tiên PFS\footnote{Priority-First
Search---PFS} để tìm đường đi ngắn nhất trên đồ thị. Khoảng cách giữa hai
điểm trong đồ thị là xác suất 2-gram của hai từ. Bài toán tìm đường
đi ngắn nhất, có thể áp dụng PFS, Prime, Djisktra. PFS được chọn vì
lưới từ, qua khảo sát, có thể được coi là một đồ thị thưa.

Để áp dụng 3-gram thay vì 2-gram, ta sẽ sử dụng lưới 2-từ. Sau đó áp
dụng thuật toán PFS cho đồ thị mới.

Cách làm này không thể thực hiện với n-gram ($n > 3$) vì khi đó số
nút/cạnh trong đồ thị sẽ tăng đáng kể. Ngoài ra, PFS cũng không áp
dụng được trong trường hợp sử dụng những độ đo như đo số lỗi sai đã
xảy ra~\ldots Trong trường hợp đó ta nên sử dụng thuật toán A*~\cite{Ravishankar}

%% XXXX. Nếu WFST cộng viterbi, beam pruning \ldots thì sao nhỉ?


\section{Tìm từ thay thế}

Đối với tiếng Anh, bước này dùng thuật toán như metaphone,
Soundex~\cite{soundex},
Phonetex~\cite{phonetex}. Ý tưởng 
là dựa vào heuristic, thay thế các nhóm ký tự trong từ thành một ký
hiệu tương trưng cho một âm. Sau đó so sánh độ hiệu chỉnh giữa âm của
từ sai và các âm của từ trong từ điển. Do tiếng Việt đọc sao ghi vậy,
nên bước chuyển từ từ sang âm có thể bỏ qua. Bước còn lại là áp dụng
thuật toán đo độ hiệu chỉnh giữa hai từ như đã nêu trong~\ref{algo:ed}
Ta có thể so sánh từng ký tự, hoặc so sánh theo âm (ví dụ, ``th'' thay
vì ``t'' và ``h'').

Chương trình sẽ liệt kê XXXX (chọn theo tiêu chí nào?, 10 từ lớn nhất
hay sao đây)

XXXX. thuật toán tính ed.

\section{Giao tiếp với người dùng}
\label{sec:ui}

Cố gắng khai thác tri thức của người sử dụng, nhằm bổ trợ cho trình
bắt lỗi, giảm thiểu các sai sót do trình bắt lỗi gây ra.

Hỏi người dùng càng nhiều càng tốt. Luôn luôn có một tùy chọn ``không
biết'' cho người dùng.

\begin{itemize}
\item Phần bắt lỗi tiếng.
\item Nhận dạng từ sai.
\item Nhận dạng ký hiệu, tên riêng nước ngoài.
\end{itemize}

Sau mỗi lần sữa lỗi, cần chạy lại thuật toán để loại tác động của lỗi
sai.

Văn bản xử lý được phân thành nhiều tầng:
\begin{enumerate}
\item Văn bản thô toàn bộ. Chuỗi các ký tự.
\item Văn bản thô (câu).
\item Dạng token. Tách ra từng chuỗi con.
\item Dạng sentence. Một số token sẽ được gán id. Một số khác bị bỏ
  qua. 
\item Dạng lattice. Đồ thị các id (có thể giống hoặc khác với id ở cấp
  sentence) và các liên kết. 
\item Dạng segmentation. chuỗi id nhất định.
\end{enumerate}

Hiện tại, việc thay đổi thông tin ở tầng trên sẽ hủy mọi thông tin ở
tầng bên dưới.

Lưu lại các thông tin của người dùng như thế nào? Các thông tin này là
``global'' hay ``local''?

\section{Trình huấn luyện}
\label{sec:training}

\subsection{Tiền xử lý}
Giống như phần~\ref{sub:preprocess}


\subsection{Tạo Lưới từ}
Giống như phần~\ref{sub:lattice}, nhưng chỉ xét những từ nào thực sự
có trong câu, sử dụng lưới từ thay vì lưới từ mở rộng.


\subsection{Thống kê n-gram}
\label{sub:wordcount}

Nếu dùng PFS để tách từ, ta chỉ có 1 cách tách từ tốt nhất. Việc đếm
từ sẽ dựa trên cách tách từ này.

Như đã nói, có thể dùng WFST hoặc dùng thuật toán trong
\cite{softcount} (tạm gọi là thuật toán ``soft-count'') để tách
từ. WFST phải dùng kèm với beam pruning để tránh bùng nổ số tổ hợp các
cách tách từ. Sau khi dùng WFST, ta còn n cách tách từ, có thể đếm
fractional count (được đề cập bên dưới) trên các cách tách từ này.

Trường hợp nhiều cách tách từ, ta có thểm đếm từ trên tất cả các cách
tách, thay vì chỉ đếm trên cách tách từ tốt nhất. Cách này phản ánh
tầm ảnh hưởng của các từ tốt hơn. Ví dụ, ta có 3 cách tách từ với xác
suất các cách tách từ tương ứng lần lượt là 0.5, 0.4 và 0.1. Cách chỉ
dùng cách tách từ tốt nhất sẽ chỉ tính những từ trong cách tách từ
đầu, với giá trị mỗi từ là 1.0. Cách tính này ``dồn phiếu'' của 2 cách
sau cho cách đầu. Trường hợp sau, các từ trong cách 2 và 3 vẫn được
tính. Số đếm của mỗi từ không còn là 1, mà là xác suất của cách tách
từ chứa từ đó. Trở lại ví dụ, các từ trong cách một sẽ được cộng thêm
0.5 thay vì 1. Ngoài ra các từ trong cách 2 và 3 lần lượt được cộng
0.4 và 0.1. Dễ thấy, các từ trong cách tách từ thấp sẽ không tăng số
đếm đáng kể, do đó không thể gây ảnh hưởng lớn đến quyết định tách từ.
Cách cộng dồn số như vậy được gọi là ``fractional count'' (hay trong
\cite{softcount} gọi là ``soft-count'').

Luận văn này thuật toán soft-count để đếm mọi cách tách từ. Soft-count
thực tế không kết xuất ra một cách tách từ cụ thể nào (và do vậy nên
cũng không thể áp dụng để tìm cách tách từ tốt nhất được!). Thay vào
đó, thuật toán đếm mọi từ thể có. Thuật toán được mô tả trong
\cite{softcount} không dùng từ điển. Mọi chuỗi con trong câu đều được
cho là từ. Điểm này, vừa là điểm mạnh vì không cần dùng từ
điển, nhưng cũng là điểm yếu vì yếu tố này làm giảm độ chính xác một
cách đáng kể (khoảng 20\verb#%#, như kết quả trong \cite{softcount}).

Giả sử câu S có $n$ tiếng, $2^{n-1}$ cách tách từ khác nhau, xác suất
mỗi cách tách từ là $p(1),p(2),\ldots,p(n)$.
Với mỗi từ trong một cách tách từ, ta cộng thêm một khoảng
$\displaystyle\frac{p(i)}{\sum_{i=1}^n{p(i)}}$ cho từ đó. Soft-count dùng
lập trình quy hoạch động để thực hiện quá trình này.

Thuật toán được dùng ở đây là thuật toán soft-count, được hiệu chỉnh
sử dụng từ điển và lưới từ để hạn chế những từ không phải là từ.

Cho lưới từ của câu S. Gọi $L(W)$ là tập những từ nối đến nút
$W$. Tương tự, $R(W)$ là tập những từ được nối đến từ nút $W$.
Với mỗi nút $W$ trong S, tổng xác suất các cách tách từ có chứa nút
$W$ là:
$$P(W)=P^{left}(W)p(W)P^{right}(W)$$
Trong đó:
\begin{itemize}
\item $P^{left}(W)$ là tổng xác suất các cách tách từ tính từ đầu câu
  đến $W$.
\item $P^{right}(W)$ là tổng xác suất các cách tách từ tính từ $W$ đến
  hết câu.
\end{itemize}

$$
P^{left}(W) = \left\{
    \begin{array}{ll}
      p(W)&\text{nếu W là nút head}\\
      \displaystyle\sum_{W' \in L(W)}p(W')P^{left}(W')&\text{ngược lại}\\
    \end{array}
  \right.
$$

Tương tự

$$
P^{right}(W) = \left\{
    \begin{array}{ll}
      p(W)&\text{nếu W là nút tail}\\
      \displaystyle\sum_{W' \in R(W)}p(W')P^{right}(W')&\text{ngược lại}\\
    \end{array}
  \right.
$$

\begin{algo}[Tính $P^{left}$]
\begin{enumerate}
\item Đặt $P^{left}(head) = p(head)$
\item Đặt $P^{left}(W) = 0$ với mọi $W$ còn lại.
\item Duyệt lần lượt các nút $W$ theo thứ tự từ trái sang phải, tính
  theo vị trí bắt đầu của $W$ trong câu. Với $W' \in R(W)$
  cộng thêm $p(W)P^{left}(W)$ vào $P^{left}(W')$
\end{enumerate}
\end{algo}

Thuật toán tương tự được áp dụng để tính $P^{right}$.

Sau khi tính được $P^{left}$ và $P^{right}$, ta có thể tính fractional
count cho các từ trong câu bằng cách duyệt tất cả các nút trong lưới từ,
cộng thêm vào $\displaystyle\frac{P(W)}{P^{left}(tail)}$ cho từ
$C$. Thực tế, ta sẽ lồng bước này vào trong thuật toán tính
$P^{right}$, vì thuật toán cũng phải duyệt qua tất cả các từ.

\begin{algo}[Tính $P^{right}$]
\begin{enumerate}
\item Đặt $P^{right}(tail) = p(tail)$
\item Đặt $P^{right}(W) = 0$ với mọi nút còn lại.
\item Duyệt tất cả các nút $W$ từ phải sang trái, tính theo vị trí kết
  thúc của $W$ trong câu.
  \begin{enumerate}
  \item Với $W' \in L(W)$, cộng thêm $p(W)P^{right}(W)$ vào
    $P^{right}(W')$
  \item Tính fractional count cho $W$ theo công thức
    $\displaystyle\frac{P^{left}(W)p(W)P^{right}(W)}{P^{left}(tail)}$
  \end{enumerate}
\end{enumerate}
\end{algo}


Tuy nhiên, thuật toán trên (cũng như thuật toán gốc) sử dụng
uni-gram, trong khi trình bắt lỗi lại dùng 2-gram. Để cho phép thuật
toán dùng 2-gram, ta có thể tạo một lưới 2-từ như cách của
\cite{Ravishankar} khi muốn tách từ dựa trên 3-gram. Tuy nhiên, để áp
dụng cách này với 3-gram đòi hỏi phải tạo lưới 3-từ! Số lượng nút
trong lưới 3-từ nhiều hơn nhiều so với lưới từ gốc, làm giảm tính hiệu
quả của thuật toán. 

Thay vì vậy, thuật toán được hiệu chỉnh để áp dụng 2-gram với lưới từ
thông thường. Thay vì dùng giá trị nút để tính, ta dùng giá trị cạnh
để tính. $p(W)$ sẽ được thay bằng $p(W/W')$.

$$P(W)=P^{left}(W)P^{right}(W)$$

$$
P^{left}(W) = \left\{
    \begin{array}{ll}
      p(W)&\text{nếu W là nút head}\\
      \displaystyle\sum_{W' \in L(W)}p(W/W')P^{left}(W')&\text{ngược lại}\\
    \end{array}
  \right.
$$

Tương tự

$$
P^{right}(W) = \left\{
    \begin{array}{ll}
      p(W)&\text{nếu W là nút tail}\\
      \displaystyle\sum_{W' \in R(W)}p(W'/W)P^{right}(W')&\text{ngược lại}\\
    \end{array}
  \right.
$$

$P(W)$ đại diện cho xác suất tất cả các cách tách từ đi qua nút
$W$. Do ta huấn luyện 2-gram, nên cần xác suất $P(W/W')$ chứ không cần
$P(W)$. Nếu $W$ và $W_{+1}$ chỉ có một cạnh, $P(W)$ cũng chính là
$P(W/W_{+1})$. Nếu có nhiều hơn một cạnh, ta cần dùng cách khác để
tính $P(W/W')$. Với thuật toán tính $P^{right}$ hiện có, ta cộng dồn
$p(W/W')P^{right}$ vào cho $P^{right}(W)$. Vậy trong quá trình cộng
dồn ta có thể tính ngay $P(W/W')$ bằng cách nhân giá trị cộng dồn với
$P^{left}(W)$. Thuật toán tính $P^{left}$ và $P^{right}$ sau cùng như
sau:

\begin{algo}[Tính $P^{left}$]
\begin{enumerate}
\item Đặt $P^{left}(head) = p(head)$
\item Đặt $P^{left}(W) = 0$ với mọi $W$ còn lại.
\item Duyệt lần lượt các nút $W$ theo thứ tự từ trái sang phải, tính
  theo vị trí bắt đầu của $W$ trong câu.
  Với mỗi $W$ tìm được, cộng thêm $p(W'/W)P^{left}(W)$ vào $P^{left}(W')\quad
  W' \in R(W)$
\end{enumerate}
\end{algo}

\begin{algo}[Tính $P^{right}$]
\begin{enumerate}
\item Đặt $P^{right}(tail) = p(tail)$
\item Đặt $P^{right}(W) = 0$ với mọi nút còn lại.
\item Duyệt tất cả các nút $W$ từ phải sang trái, tính theo vị trí kết
  thúc của $W$ trong câu. Với $W' \in L(W)$:
  \begin{enumerate}
  \item Cộng thêm $p(W/W')P^{right}(W)$ vào $P^{right}(W')$
  \item Tính fractional count cho $W'$ theo công thức
    $\displaystyle\frac{P^{left}(W')p(W/W')P^{right}(W)}{P^{left}(tail)}$
  \end{enumerate}
\end{enumerate}
\end{algo}

Với cách tính này, ta có thể dùng lưới từ cùng với 2-gram. Để tính
3-gram, ta dùng lưới 2-từ. 

\subsection{Tính n-gram}

N-gram được tính như thông thường. Sử dụng backoff chuẩn. Thư viện
SRILM được dùng để tính n-gram.




\chapter{Cài đặt}
\label{cha:implementation}
\minitoc\newpage

Chương trình gồm hai phần: phần bắt lỗi chính tả và phần huấn luyện.

\section{Trình bắt lỗi chính tả}



\section{Cấu trúc dữ liệu}


\subsection{Lưu chuỗi}

Để giảm thiểu không gian bộ nhớ, chương trình không thao tác trực tiếp
trên các chuỗi mà lưu tập trung các chuỗi lại, sau đó dùng mã id để
đánh số từng chuỗi một. Các thao tác so sánh sẽ dựa trên id này. Khi
cần thao tác trên chuỗi, ta sẽ thông qua id để lấy chuỗi gốc.

Các chuỗi được lưu trong một associative array và một array. Một dùng
để ánh xạ chuỗi sang id. Một để ánh xạ id sang chuỗi.

Có thể dùng lexical tree để giảm thiểu không gian lưu chuỗi (UNIMPL)

Mỗi chuỗi có thể có nhiều id: id gắn với chuỗi gốc ({\em id}), id gắn
với chuỗi gốc đã chuẩn hoá ({\em sid}), id gắn với chuỗi viết thường
({\em cid}), id  gắn với chuỗi viết thường đã chuẩn hoá ({\em
  scid}). Các id này giúp việc so sánh được dễ dàng hơn. 

Trong hầu hết quá trình hoạt động, {\em sid} sẽ được dùng. Tuy nhiên,
cũng có khi sẽ dùng {\em scid}. Bởi vậy, mỗi chuỗi sẽ có một id khác
là {\em fid}, hoặc bằng {\em sid}, hoặc bằng {\em scid}~\ldots{} {\em
  fid} sẽ được dùng trong hầu hết các hoạt động, trừ phần tiền xử lý.

Mỗi từ sẽ chỉ lưu id và fid.

\subsection{Lưu từ điển}

Từ điển được lưu thành một cấu trúc dạng cây. Hiện tại từ điển lưu các
từ gốc đã chuẩn hoá, và các từ viết thường đã chuẩn hoá.

Với bản huấn luyện, lưu thêm id gốc để có thể xuất ra y như cũ ??
Không cần. Wordlist sẽ lưu theo dạng chuẩn hoá. Như vậy không cần lưu
id gốc. Quá trình training cần có bước chuyển tiếp để đọc wordlist
chưa chuẩn hoá, ghi ra wordlist chuẩn hoá.


\section{Dữ liệu huấn luyện}
\label{sec:data-preprocessing}

Dữ liệu gốc bao gồm: danh sách từ và các văn bản tiếng Việt thu thập
từ mạng VnExpress\footnote{http://www.vnexpress.net}.

Nhiệm vụ:
\begin{itemize}
\item Tạo danh sách tiếng, chuẩn hoá danh sách tiếng.
\item Tiền xử lý ngữ liệu.
\item Huấn luyện n-gram, tạo ra dữ liệu n-gram.
\end{itemize}


\subsection{Dữ liệu nguồn}
\label{sec:data-source}

Dữ liệu nguồn bao gồm danh sách từ và ngữ liệu tiếng Việt. Dữ liệu
được lưu dưới dạng mã VISCII. 
\subsubsection{Danh sách từ}

Đây là một tập tin văn bản lưu tất cả các từ được dùng trong tiếng
Việt, mỗi từ một dòng. Các chữ cách bởi một khoảng trắng.


\subsubsection{Ngữ liệu huấn luyện}

Bao gồm một loạt các tập tin văn bản tiếng Việt. Mỗi dòng là một đoạn
văn bản.

\subsection{Danh sách tiếng}
\label{sub:syllable-list}

Danh sách tiếng chứa mọi tiếng thông dụng nhất được sử dụng trong
tiếng Việt. Danh sách này được rút trích từ danh sách từ, sau đó được
lưu ở dạng chuẩn hoá.

Danh sách tiếng được rút trích tự động khi chương trình nạp danh sách
từ.

%Chương trình syllable-extract được dùng để tạo danh sách này. Cách
%dùng:
%\begin{verbatim}
%$syllable-extract < word-list > syllable-list
%\end{verbatim}


\subsection{Tiền xử lý ngữ liệu huấn luyện}
\label{sec:training-data-preprocessing}

Dữ liệu thu được từ VnExpress bao gồm một loạt các file html, chia
thành nhiều thư mục.

htmltidy được sử dụng để chuyển dữ liệu html về dạng xhtml. Các file
html của VnExpress không hoàn toàn tuân theo chuẩn html, bao gồm hai
trường hợp:

\begin{itemize}
\item Sử dụng tag <vne>
\item Không đóng tag <frame>
\end{itemize}

Hai lỗi này được tự động phát hiện và sửa chữa trước khi chuyển dữ
liệu cho htmltidy.

Sau khi chạy htmltidy, ta được dữ liệu xhtml hợp khuôn dạng. Phân tích
các tài liệu này cho thấy phần nội dung chính thường nằm trong tag
<vne>, hoặc trong tag <table> với thuộc tính id là
``CContainer''. XSLT được sử dụng để lọc ra phần nội dung nằm giữa hai
tag này (\verb#z.xslt#).

Trình \verb#convert.sh# sẽ thực hiện bước htmltidy và xslt ở trên. Cách sử
dụng:
\begin{verbatim}
$convert.sh < input  > output
\end{verbatim}

Sau bước này, ta cần lọc bỏ các tag, loại bỏ các entity~\ldots{} để
đưa dữ liệu về dạng văn bản thuần túy. Do số lượng tag được định nghĩa
html rất nhiều nên chỉ xử lý những tag nào được sử dụng trong
VnExpress (thông qua chương trình \verb#gettags.pl#). Các tag này được loại
bỏ bằng \verb#html2text.pl#. Các mã utf-8 được sử dụng trong
VnExpress (thông qua chương trình \verb#z.c#) được chuyển về mã VISCII
qua \verb#z.cpp#. Các entity còn lại (lấy bằng \verb#list-entity.pl#)
được xử lý trong \verb#html2text.pl#.

\verb#html2text.pl# sử dụng các tag để tách dữ liệu thành các đoạn. Dữ
liệu sau cùng là các tập tin văn bản, mỗi dòng là một đoạn.

\subsection{Huấn luyện dữ liệu}
\label{sub:training-data}

Chương trình \verb#wfst-train# được dùng để huấn luyện dữ liệu. Thông
tin nhập là danh sách từ, danh sách tiếng, n-gram (nếu có). Thông tin
xuất là n-gram mới.

Chương trình được lặp đi lặp lại nhiều lần.

\chapter{Đánh giá và kết luận}
\label{cha:conclusion}
\minitoc\newpage

\section{Hạn chế}
\begin{itemize}
\item Không sử dụng những thông tin cấp cao hơn.
\item Có khả năng nó tự động sửa từ đúng thành từ sai, do từ sai
  ``hay'' được dùng trong câu đó hơn là từ đúng :-P
\end{itemize}

\section{Hướng phát triển}
\label{sec:todo}

Viết lại từ đầu :-D

\begin{itemize}
\item Các hướng cải tiến EM.
\item Tư tưởng cơ bản hiện thời là phát sinh mọi trường hợp tương tự
  với trường hợp đang xét và hy vọng giải pháp đúng cũng nằm trong
  đó. Cách này có hai điểm cần bàn:
  \begin{itemize}
  \item Khi nào nên phát sinh, khi nào không? Nói cách khác, khi nào
    ta ``cảm thấy'' chỗ đó có thể bị sai? Statistics/Genetic approach?
  \item Khi phát sinh, nên đánh giá tầm quan trọng của các cách phát
    sinh  cho hợp lý, không nên đánh đồng như hiện nay. How can i do
    that? 
  \end{itemize}
\item Ngoài cách đang làm, còn hướng nào khác không? Liệu speech
  recognition/OCR có ý kiến nào hay không? Cần tìm hiểu mọi thứ liên
  quan đến ``error tolerance''
\item \verb#Syllable::to_str()# output sai từ ``của''.
\item Từ điển bao gồm hai loại viết hoa ``Việt Nam'' và ``A di đà
  phật''. Nên phát sinh thêm loại ``A Di Đà Phật'' luôn. Làm sao chuẩn
  hoá cả hai càng tốt. Chỉ cần lưu ``a di đà phật'' là đủ.
\item \verb#Syllable::parse()# sẽ gặp vấn đề với chữ hoa.
\end{itemize}


\chapter{Phụ lục}

\begin{thebibliography}{}
\bibitem{Ravishankar}Mosur K. Ravishankar. 1996. {\em Efficient Algorithms for
  Speech Recognition.} PhD thesis. %CMU-CS-96-143.ps
\bibitem{Oflazer}Kemal Oflazer. 1996. {\em Error-tolerant Finite State
  Recognition with Applications to Morphological Analysis and Spelling
  Correction.} %oflazer96errortolerant.ps.gz
\bibitem{LAH}Le An Ha. {\em A method for word segmentation in
  Vietnamese.} %Ha-03.pdf
\bibitem{Chang}Chao-Huang Chang. {\em A New Approach for
  Automatic Chinese Spelling Correction.} %a-new-approach-for.ps
\bibitem{Sproat}Richard Sproat, William Gale, Chilin Shih, Nancy
  Chang. {\em A Stochastic Finite-State Word-Segmentation Algorithm for
  Chinese.} ACL Vol 22 N3.%J96-3004.pdf
\bibitem{Chunyu}Chunyu Kit, Zhiming Xu, Jonathan
  J. Webster. {\em Integrating Ngram Model and Case-based Learning For
  Chinese Word Segmentation.}%tsdx.ps.gz
\bibitem{softcount}Xianping Ge, Wanda Pratt,
  Padhraic Smyth. {\em Discovering Chinese Words from Unsegmented
  Text.}%mlwordsigir.ps
\bibitem{text-tiling}Jianfeng Gao, Hai-Feng Wang, Mingjing Li, Kai-Fu
  Lee. {\em A Unified Approach to Statistical Language Modeling for
  Chinese.}%icassp00.pdf
\bibitem{}Nianwen Xue.{\em Chinese Word Segmentation as Character
  Tagging.}%paper2.pdf
\bibitem{self-supervised}Fuchun Peng and Dale Schuurmans. {\em Self-Supervised Chinese
  Word Segmentation.}%IDA01.pdf
\bibitem{phonetex}Victoria J. Hodge, Jim Austin. {\em An Evaluation of
  Phonetic Spell Checkers}%an-evaluation-of-phonetic.ps.gz
\bibitem{soundex}K. Kukich. 1992. {\em Techniques for Automatically Correcting
  Words in Text.}
\bibitem{}Cláudio L. Lucchesi and Tomasz Kowaltowski. {\em Applications of
  Finite Automata Representing Large Vocabularies.}%lucchesi92applications.ps.gz
\bibitem{}Bo-Hyun Yun, Min-Jeung Cho, Hae-Chang Rim. {\em Segmenting Korean
  Compound Nouns using Statistical Information and a Preference
  Rule. }%PACLING97.ps 
\bibitem{}Roger I. W. Spooner and Alistair D. N. Edwards. {\em User
  Modelling for Error Recovery: A Spelling Checker for Dyslexic
  Users}%spooner97user.ps.gz 
\bibitem{}Theppitak Karoonboonyanan, Virach Sornlertlamvanich,
  Surapant Meknavin. {\em A Thai Soundex System for Spelling Correction.}%tsdx.ps.gz
\bibitem{}Justin Zobel and Philip Dart. {\em Finding Approximate Matches in
  Large Lexicons.}%zobel95finding.ps.gz
\bibitem{}Sun Maosong, Shen Dayang, Huang Changning. {\em CSeg\&Tag1.0: A
  Practical Word Segmenter and POS Tagger for Chinese Texts.}%A97-1018.pdf
\bibitem{wordseg}Đinh Điền, Hoàng Kiếm, Nguyễn Văn Toàn. {\em Vietnamese Word
  Segmentation.}%0047-02.pdf
\bibitem{}Bidyut Baran Chaudhuri. {\em Reversed word dictionary and
  phonetically similar word grouping based spell-checker to Bangla
  text.}%bangla.pdf
\bibitem{}Timothy Gambell, Charles D. Yang. {\em Scope and Limits of
  Statistical Learning in Word Segmentation.}%gambell_yang.pdf
\bibitem{iccc}Andi Wu, George Heidorn, Zixin Jiang, Terence
  Peng. {\em Correction of Erroneous Characters in Chinese Sentence
  Analysis.}%ICCC-2001.pdf
\bibitem{}Fuchun Peng, Xiangji Huang, Dale Schuurmans, Shaojun
  Wang. {\em Text Clasification in Asian Languages without Word
  Segmentation.}%IRAL2003.pdf 
\bibitem{}Yalin Wang, Ihsin T. Phillips, Robert
  Haralick. {\em Statistical-based Approach to Word Segmentation.}%wordicpr.pdf
\bibitem{}{\em Combining Syntactical And Statistical Language Constraints
  in Context-dependent Language Models for Interactive Speech
  Applications.}%K026.pdf
\bibitem{LoiChinhTa}TS. Lê Trung Hoa. 2002. {\em Lỗi chính tả và cách khắc phục. NXB Khoa
  học Xã hội.} 
\bibitem{LoiTuVung}PGS. Hồ Lê, TS. Trần Thị Ngọc Lang, Tô Đình Nghĩa. 2002. {\em Lỗi từ
  vựng và cách khắc phục.} NXB Khoa học Xã hội.
\bibitem{Tuoi}PTS. Phan Thị Tươi, KS. Nguyễn Hứa Phùng, KS. Huỳnh Vụ
  Như Liên, KS. Phạm Quyết Thắng. 1998. {\em Bắt lỗi chinh tả tự động cho
  tiếng Việt bằng máy tính.}
\bibitem{worddef}Đinh Điền. 2000. {\em Từ tiếng Việt.} VNU-HCMC.
\bibitem{}Andrew R. Golding. 1995. {\em A Bayesian hybrid method for
    context-sensitive spelling correction}. Proceedings of the Third
    Workshop on Very Large Corpora, pages 39-53.
\bibitem{}Andrew R. Golding and Dan Roth. 1999. {\em A Winnow-based
    approach to context-sensitive correction}. Machine Learning,
    Special issue on Machine Learning and Natural Language Processing,
    34:107-130.
\bibitem{}Andrew R. Golding and Yves Schabes. 1996. {\em Combining
    trigram-based and feature-based methods for context-sensitive
    spelling correction}. Proceedings of the 34th Annual Meeting of
    the Association for Computational Linguistics.
\end{thebibliography}


\end{document}


Giả sử câu S có $n$ tiếng $c_1,c_2,\ldots,c_n$, có $|S|$ cách tách từ
$S_1,S_2,\ldots,S_{|S|}$ và cách tách từ  $S_i$ được
tách thành $|S_i|$ từ $W_{i_1},W_{i_2},\ldots,W_{i_{|S_i|}}$ với 
$W_i$ là một từ xác định bắt đầu ở tiếng thứ $i$ chứa $|W_i|$ tiếng, và
$i_j$ là vị trí từ thứ $j$ trong cách tách câu $i$.

Ta có:
$$p(i)=\sum_{j=1}^{|S_i|}{p(W_{i_j})}$$

Một câu sẽ được tách thành:
$$P(W_i) = P_{i}^{left}p(W_{i})P_{i+|W_i|}^{right}$$

$P_i^{left}$ là xác suất tất cả các tổ hợp từ có thể có từ 
tiếng thứ nhất đến tiếng thứ $i$.

$P_{i}^{right}$ là xác suất tất cả các tổ hợp từ có thể có từ tiếng
thứ  $i$ đến hết câu. 

Dễ thấy, với mỗi từ $C$ trong câu $S$, fractional count W của từ sẽ là
$\displaystyle\frac{P(W)}{\sum_i^{|S|}p(i)}$.

$\displaystyle\sum_i^{|S|}p(i)$ cũng chính là $P_{n+1}^{left}$ theo
định nghĩa $P_i^{left}$.

Ta sẽ dùng quy hoạch động để tính $P_i^{left}$ và $P_i^{right}$

$$
P_i^{left} = \left\{
  \begin{array}{lr}
    1 & i=1\\
    p(W_i) & i=2\\
    \sum_{j=1}^{i-1}p(c_j\ldots c_{i-1})P_j^{left} & i>2
  \end{array}
\right.
$$

$$
p(c_i\ldots c_j) = \left\{
  \begin{array}{ll}
    p(W_i)&\text{nếu } c_i\ldots c_j \text{ tạo thành } W_i\\
    0&\text{ngược lại}
  \end{array}
\right.
$$

Thuật toán tính $P^{left}$ như sau:
\begin{enumerate}
\item Đặt $P_1^{left} = 1$
\item Đặt $P_i^{left} = 0\quad \forall i \in [2\ldots n+1]$
\item Duyệt i từ 1 đến n, tìm tất cả các từ $W_i$ (do tại có thể có
  nhiều từ bắt đầu tại tiếng $i$).
  Với mỗi từ $W_i$ tìm được, cộng thêm $p(W_i)$ vào $P_{i+|W_i|}^{left}$
\end{enumerate}

Thuật toán tương tự được áp dụng để tính $P^{right}$.

Sau khi tính được $P^{left}$ và $P^{right}$, ta có thể tính fractional
count trong câu bằng cách duyệt tất cả các từ có thể có trong câu,
cộng thêm vào $\displaystyle\frac{P(W)}{P_{n+1}^{left}}$ cho từ
$C$. Thực tế, ta sẽ lồng bước này vào trong thuật toán tính
$P^{right}$, vì thuật toán cũng phải duyệt qua tất cả các từ.

Vậy thuật toán tính $P^{right}$ là:
\begin{enumerate}
\item Đặt $P_{n+1}^{right} = 1$
\item Đặt $P_i^{right} = 0\quad \forall i \in [1\ldots n]$
\item Duyệt i từ n+1 đến 1.
  \begin{enumerate}
  \item tìm tất cả các từ $W_j$ sao cho $j+|W_j|=i$.
    Với mỗi từ $W_j$ tìm được, cộng thêm $p(W_j)$ vào
    $P_j^{right}$
  \item Tính fractional count cho tất cả các từ $W_i$ ($i \le n$)
  \end{enumerate}
\end{enumerate}


Ví dụ: câu ``học sinh học sinh học'' có 8 cách tách từ
\begin{verbatim}
học-sinh học-sinh học
học-sinh học sinh học
học-sinh học sinh-học
học sinh học sinh học
học sinh học sinh-học
học sinh học-sinh học
học sinh-học sinh học
học sinh-học sinh-học
\end{verbatim}
\def\Zhs{\text{học-sinh}}
\def\Zsh{\text{sinh-học}}
\def\Zh{\text{học}}
\def\Zs{\text{sinh}}
Ta có
$$
\begin{array}{rl}
P_1^{left}(\Zhs) &= p(\Zhs_1/\phi)\\
P_1^{left}(\Zh) &= p(\Zh_1/\phi)\\
P_2^{left}(\Zs) &= p(\Zs_2/\Zh_1)P_1^{left}(\Zh)\\
 &=p(\Zs_2/\Zh_1)p(\Zh_1/\phi)\\
P_2^{left}(\Zsh) &= p(\Zsh_2/\Zh_1)P_1^{left}(\Zh)\\
 &=p(\Zsh_2/\Zh_1)p(\Zh_1/\phi)\\
P_3^{left}(\Zhs) &= p(\Zhs_3/\Zhs_1)P_1^{left}(\Zhs)+p(\Zhs_3/\Zs_2)P_2^{left}(\Zs)\\
 &=p(\Zhs_3/\Zhs_1)p(\Zhs_1/\phi)+p(\Zhs_3/\Zs_2)p(\Zs_2/\Zh_1)p(\Zh_1/\phi)\\
 &=p(\Zhs_1,\Zhs_3)+p(\Zh_1,\Zs_2,\Zhs_3)\\
P_3^{left}(\Zh) &= p(\Zh_3/\Zs_2)P_2^{left}(\Zs)+p(\Zh_3/\Zhs_1)P_1^{left}(\Zhs)\\
 &=p(\Zh_3/\Zs_2)p(\Zs_2/\Zh_1)p(\Zh_1/\phi)+p(\Zh_3/\Zhs_1)p(\Zhs_1/\phi)\\
 &=p(\Zh_1,\Zs_2,\Zh_3)+p(\Zhs_1,\Zh_3)\\
\end{array}
$$

$$
\begin{array}{rl}
P_5^{right}(\Zh) &= p(\Phi/\Zh_5)\\
P_4^{right}(\Zsh) &= p(\Phi/\Zsh_4)\\
P_4^{right}(\Zs) &= p(\Zh_5/\Zs_4)P_5^{right}(\Zh)\\
 &=p(\Zh_5/\Zs_4)p(\Phi/\Zh_5)\\
P_3^{right}(\Zh) &= p(\Zsh_4/\Zh_3)P_4^{right}(\Zsh)+p(\Zs_4/\Zh_3)P_4^{right}(\Zs)\\
 &=p(\Zsh_4/\Zh_3)p(\Phi/\Zsh_4)+p(\Zs_4/\Zh_3)(\Zh_5/\Zs_4)p(\Phi/\Zh_5)\\
 &=p(\Zh_3,\Zsh_4)+p(\Zh_3,\Zs_4,\Zh_5)\\
P_3^{right}(\Zhs) &= p(\Zh_5/\Zhs_3)P_5^{right}(\Zh)\\
 &=p(\Zh_5/\Zhs_3)p(\Phi/\Zh_5)\\
 &=p(\Zhs_3,\Zh_5)\\
\end{array}
$$

$$
\begin{array}{rl}
P_3(\Zhs) &= P_3^{left}(\Zhs)P_3^{right}(\Zhs)\\
 &=[p(\Zhs_1,\Zhs_3)+p(\Zh_1,\Zs_2,\Zhs_3)]p(\Zhs_3,\Zh_5)\\
 &=p(\Zhs_1,\Zhs_3)p(\Zhs_3,\Zh_5)+p(\Zh_1,\Zs_2,\Zhs_3)p(\Zhs_3,\Zh_5)\\
 &=p(\Zhs_1,\Zhs_3,\Zh_5)+p(\Zh_1,\Zs_2,\Zhs_3,\Zh_5)
\end{array}
$$


