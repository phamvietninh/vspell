#!/usr/bin/perl

%entity = (
   '&#224;'  => 'à',
   '&#7843;' => 'ä',
   '&#227;'  => 'ã',
   '&#225;'  => 'á',
   '&#7841;' => 'Õ',
   '&#259;'  => 'å',
   '&#7857;' => '¢',
   '&#7859;' => 'Æ',
   '&#7861;' => 'Ç',
   '&#7855;' => '¡',
   '&#7863;' => '£',
   '&#226;'  => 'â',
   '&#7847;' => '¥',
   '&#7849;' => '¦',
   '&#7851;' => 'ç',
   '&#7845;' => '¤',
   '&#7853;' => '§',
   '&#232;'  => 'è',
   '&#7867;' => 'ë',
   '&#7869;' => '¨',
   '&#233;'  => 'é',
   '&#7865;' => '©',
   '&#234;'  => 'ê',
   '&#7873;' => '«',
   '&#7875;' => '¬',
   '&#7877;' => '­',
   '&#7871;' => 'ª',
   '&#7879;' => '®',
   '&#236;'  => 'ì',
   '&#7881;' => 'ï',
   '&#297;'  => 'î',
   '&#237;'  => 'í',
   '&#7883;' => '¸',
   '&#242;'  => 'ò',
   '&#7887;' => 'ö',
   '&#245;'  => 'õ',
   '&#243;'  => 'ó',
   '&#7885;' => '÷',
   '&#244;'  => 'ô',
   '&#7891;' => '°',
   '&#7893;' => '±',
   '&#7895;' => '²',
   '&#7889;' => '¯',
   '&#7897;' => 'µ',
   '&#417;'  => '½',
   '&#7901;' => '¶',
   '&#7903;' => '·',
   '&#7905;' => 'Þ',
   '&#7899;' => '¾',
   '&#7907;' => 'þ',
   '&#249;'  => 'ù',
   '&#7911;' => 'ü',
   '&#361;'  => 'û',
   '&#250;'  => 'ú',
   '&#7909;' => 'ø',
   '&#432;'  => 'ß',
   '&#7915;' => '×',
   '&#7917;' => 'Ø',
   '&#7919;' => 'æ',
   '&#7913;' => 'Ñ',
   '&#7921;' => 'ñ',
   '&#7923;' => 'Ï',
   '&#7927;' => 'Ö',
   '&#7929;' => 'Û',
   '&#253;'  => 'ý',
   '&#7925;' => 'Ü',
   '&#273;'  => 'ð',
   '&#192;'  => 'À',
   '&#7842;' => 'Ä',
   '&#195;'  => 'Ã',
   '&#193;'  => 'Á',
   '&#7840;' => '€',
   '&#258;'  => 'Å',
   '&#7856;' => '‚',
   '&#7858;' => '',
   '&#7860;' => '',
   '&#7854;' => '',
   '&#7862;' => 'ƒ',
   '&#194;'  => 'Â',
   '&#7846;' => '…',
   '&#7848;' => '†',
   '&#7850;' => '',
   '&#7844;' => '$',
   '&#7852;' => '‡',
   '&#200;'  => 'È',
   '&#7866;' => 'Ë',
   '&#7868;' => 'ˆ',
   '&#201;'  => 'É',
   '&#7864;' => '‰',
   '&#202;'  => 'Ê',
   '&#7872;' => '‹',
   '&#7874;' => 'Œ',
   '&#7876;' => '',
   '&#7870;' => 'Š',
   '&#7878;' => 'Ž',
   '&#205;'  => 'Í',
   '&#7880;' => '›',
   '&#296;'  => 'Î',
   '&#204;'  => 'Ì',
   '&#7882;' => '˜',
   '&#210;'  => 'Ò',
   '&#7886;' => '™',
   '&#213;'  => ' ',
   '&#211;'  => 'Ó',
   '&#7884;' => 'š',
   '&#212;'  => 'Ô',
   '&#7890;' => '',
   '&#7892;' => '‘',
   '&#7894;' => '’',
   '&#7888;' => '',
   '&#7896;' => '“',
   '&#416;'  => '´',
   '&#7900;' => '–',
   '&#7902;' => '—',
   '&#7904;' => '³',
   '&#7898;' => '•',
   '&#7906;' => '”',
   '&#217;'  => 'Ù',
   '&#7910;' => 'œ',
   '&#360;'  => '',
   '&#218;'  => 'Ú',
   '&#7908;' => 'ž',
   '&#431;'  => '¿',
   '&#7914;' => '»',
   '&#7916;' => '¼',
   '&#7918;' => 'ÿ',
   '&#7912;' => 'º',
   '&#7920;' => 'q',
   '&#7922;' => 'Ÿ',
   '&#7926;' => '',
   '&#7928;' => '',
   '&#221;'  => 'Ý',
   '&#7924;' => '',
   '&#272;'  => 'Ð',
);

# Get all content
while (<>) { chomp; $text .= "$_ "; }

$text =~ s/^.*<body[^>]*>//;
$text =~ s,</body.*$,,;
$text =~ s,<script[^>]*>[^<]*</script>,,g;
$text =~ s,</P>,\n,gi;
$text =~ s,<P [^>]*>,\n,gi;
$text =~ s,</TD>,\n,gi;
$text =~ s,<TD [^>]*>,\n,gi;
$text =~ s,<([^>]*)>,,g;
foreach $i (keys %entity) {
    $val = $entity{$i};
    $text =~ s/$i/$val/g;
}
$text =~ s,&nbsp;, ,g;
$text =~ s/&[^;]*;/ ENT /g;
print $text;

# Local Variables:
# coding: viscii
# End:
